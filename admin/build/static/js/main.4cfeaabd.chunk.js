(this["webpackJsonppetio-admin"]=this["webpackJsonppetio-admin"]||[]).push([[0],{387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n(1),a=n.n(s),i=n(38),c=n.n(i),o=n(8),l=n(9),u=n(17),p=n(11),d=n(10),h=n(18),j=n(16),b=n(20);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var m=s.createElement("path",{fill:"currentColor",d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"});function O(e,t){var n=e.title,r=e.titleId,a=v(e,["title","titleId"]);return s.createElement("svg",f({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"tachometer-alt",className:"svg-inline--fa fa-tachometer-alt fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,m)}var g=s.forwardRef(O);n.p;n.p;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var w=s.createElement("path",{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"});function k(e,t){var n=e.title,r=e.titleId,a=y(e,["title","titleId"]);return s.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,w)}var N=s.forwardRef(k);n.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var C=s.createElement("path",{fill:"currentColor",d:"M336 0H48C21.49 0 0 21.49 0 48v464l192-112 192 112V48c0-26.51-21.49-48-48-48zm0 428.43l-144-84-144 84V54a6 6 0 0 1 6-6h276c3.314 0 6 2.683 6 5.996V428.43z"});function E(e,t){var n=e.title,r=e.titleId,a=P(e,["title","titleId"]);return s.createElement("svg",S({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"bookmark",className:"svg-inline--fa fa-bookmark fa-w-12",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,C)}var _=s.forwardRef(E);n.p;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var M=s.createElement("path",{fill:"currentColor",d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"});function D(e,t){var n=e.title,r=e.titleId,a=T(e,["title","titleId"]);return s.createElement("svg",I({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"tools",className:"svg-inline--fa fa-tools fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,M)}var L=s.forwardRef(D),A=(n.p,function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.location.pathname,t=this.props.user.current;return Object(r.jsxs)("div",{className:"menu",children:[Object(r.jsxs)("div",{className:"menu--logo",children:[Object(r.jsxs)("div",{className:"logo",children:["Pet",Object(r.jsx)("span",{children:"io"})]}),Object(r.jsx)("p",{className:"menu--title",children:"Admin Dashboard"})]}),Object(r.jsxs)("div",{className:"menu--items",children:[Object(r.jsxs)(h.b,{to:"/user",className:"menu--item user-profile "+("/user"===e||e.startsWith("/user/")?"active":""),children:[Object(r.jsx)("p",{children:t.title}),Object(r.jsx)("div",{className:"icon",children:Object(r.jsx)("div",{className:"thumb",style:{backgroundImage:"url("+t.thumb+")",color:"red"}})})]}),Object(r.jsxs)(h.b,{to:"/",className:"menu--item "+("/"===e?"active":""),children:[Object(r.jsx)("p",{children:"Dashboard"}),Object(r.jsx)("div",{className:"icon",children:Object(r.jsx)(g,{})})]}),Object(r.jsxs)(h.b,{to:"/requests",className:"menu--item "+("/requests"===e||e.startsWith("/requests/")?"active":""),children:[Object(r.jsx)("p",{children:"Requests"}),Object(r.jsx)("div",{className:"icon",children:Object(r.jsx)(_,{})})]}),Object(r.jsxs)(h.b,{to:"/reviews",className:"menu--item "+("/reviews"===e||e.startsWith("/reviews/")?"active":""),children:[Object(r.jsx)("p",{children:"Reviews"}),Object(r.jsx)("div",{className:"icon",children:Object(r.jsx)(N,{})})]}),Object(r.jsxs)(h.b,{to:"/settings",className:"menu--item "+("/settings"===e||e.startsWith("/settings/")?"active":""),children:[Object(r.jsx)("p",{children:"Settings"}),Object(r.jsx)("div",{className:"icon",children:Object(r.jsx)(L,{})})]})]})]})}}]),n}(a.a.Component));A=Object(j.f)(A);var R=Object(b.b)((function(e){return{user:e.user}}))((function(e){return Object(r.jsx)(A,{user:e.user})})),z=n(21);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var W=s.createElement("circle",{cx:50,cy:50,r:32,stroke:"#ffffff",strokeWidth:0,fill:"none"}),F=s.createElement("circle",{cx:50,cy:50,r:32,stroke:"#e5a00d",strokeWidth:2,strokeLinecap:"round",fill:"none"},s.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1.5873015873015872s",values:"0 50 50;180 50 50;720 50 50",keyTimes:"0;0.5;1"}),s.createElement("animate",{attributeName:"stroke-dasharray",repeatCount:"indefinite",dur:"1.5873015873015872s",values:"0 201.06192982974676;176.93449825017714 24.127431579569617;0 201.06192982974676",keyTimes:"0;0.5;1"}));function V(e,t){var n=e.title,r=e.titleId,a=q(e,["title","titleId"]);return s.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",display:"block"},width:"201px",height:"201px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,W,F)}var B,K=s.forwardRef(V),H=(n.p,n(33)),X=n(6),Y="LOGIN",G="LOGOUT",J="GET_REVIEWS",Q="GET_REQUESTS",$="PLEX_TOKEN",Z="PLEX_DETAILS",ee="POPULAR",te="SEARCH",ne="MOVIE_LOOKUP",re="SERIES_LOOKUP",se="PERSON_LOOKUP",ae="SEASON_LOOKUP",ie="STORE_ACTOR_MOVIE",ce="STORE_ACTOR_SERIES",oe=Object(H.combineReducers)({plex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(X.a)(Object(X.a)({},e),{},{token:t.token});case Z:return Object(X.a)(Object(X.a)({},e),{},{servers:t.servers,user:t.user});default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user_roles:{permissions:[],rules:[],seen_clients:[],blocked_clients:[],_id:!1,username:!1,owner:!1,__v:0},logged_in:!1,servers:!1,config:"pending",activeServer:!1,popular:{},movie_lookup:{},series_lookup:{},season_lookup:{},person_lookup:{},search_results:{movies:[],series:[],people:[]},actor_movie:{},actor_series:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(X.a)(Object(X.a)({},e),{},{popular:t.popular,updated:!0});case te:return Object(X.a)(Object(X.a)({},e),{},{search_results:{movies:t.movies,series:t.series,people:t.people}});case ne:var n={};return t.movie&&t.movie.credits&&Object.keys(t.movie.credits).forEach((function(e){Object.keys(t.movie.credits[e]).forEach((function(r){n[t.movie.credits[e][r].id]=t.movie.credits[e][r]}))})),Object(X.a)(Object(X.a)({},e),{},{movie_lookup:Object(X.a)(Object(X.a)({},e.movie_lookup),{},Object(z.a)({},t.id,t.movie)),actor_cache:{creditCache:n},updated:!0});case se:return Object(X.a)(Object(X.a)({},e),{},{person_lookup:Object(X.a)(Object(X.a)({},e.movie_lookup),{},Object(z.a)({},t.id,t.person)),updated:!0});case re:var r={};return t.series&&t.series.credits&&Object.keys(t.series.credits).forEach((function(e){Object.keys(t.series.credits[e]).forEach((function(n){r[t.series.credits[e][n].id]=t.series.credits[e][n]}))})),Object(X.a)(Object(X.a)({},e),{},{series_lookup:Object(X.a)(Object(X.a)({},e.series_lookup),{},Object(z.a)({},t.id,t.series)),actor_cache:{creditCacheS:r},updated:!0});case ae:return Object(X.a)(Object(X.a)({},e),{},{season_lookup:Object(X.a)(Object(X.a)({},e.season_lookup),{},Object(z.a)({},"".concat(t.series,"_s").concat(t.season),t.data))});case ie:return Object(X.a)(Object(X.a)({},e),{},{actor_movie:Object(X.a)(Object(X.a)({},e.actor_movie),{},Object(z.a)({},t.id,{cast:t.cast,crew:t.crew})),updated:!0});case ce:return Object(X.a)(Object(X.a)({},e),{},{actor_series:Object(X.a)(Object(X.a)({},e.actor_series),{},Object(z.a)({},t.id,{cast:t.cast,crew:t.crew})),updated:!0});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:!1,logged_in:!1,library_index:!1,email:!1,requests:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(X.a)(Object(X.a)({},e),{},{current:t.data.user,logged_in:!0});case G:return Object(X.a)(Object(X.a)({},e),{},{current:!1,logged_in:!1,credentials:!1});case Q:return Object(X.a)(Object(X.a)({},e),{},{requests:t.requests});case J:return Object(X.a)(Object(X.a)({},e),{},{reviews:Object(X.a)(Object(X.a)({},e.reviews),{},Object(z.a)({},t.id,t.reviews))});default:return e}}}),le=n(154),ue=n(155);var pe="http://localhost:32600";function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="".concat(pe,"/login"),a={"Content-Type":"application/json"};return he(s,"post",a,{username:e,password:t,admin:n,authToken:r}).then((function(e){return e.json()}))}function he(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={headers:n,method:t};return"post"===t&&(s.body=JSON.stringify(r)),fetch(e,s)}function je(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&B.dispatch(e)}var be={login:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return new Promise((function(s,a){var i=e,c=t,o=!1;if(n){var l=localStorage.getItem("loggedin"),u=window.atob(l);r?o=u:i=u}de(i,c,r,o).then((function(e){if(e.user){var t=window.btoa(e.user.title);if(e.admin?(e.user.admin=!0,t=window.btoa(e.user.authToken),localStorage.setItem("adminloggedin",!0)):localStorage.setItem("adminloggedin",!1),!e.loggedIn&&!e.admin)return alert("Invalid Login"),void s({error:"User not found"});n||localStorage.setItem("loggedin",t),je({type:Y,data:e}),s(e)}else s({error:"User not found"})})).catch((function(e){alert(e),a("Error")}))}))},logout:function(){je({type:G})},getRequests:function(){return new Promise((function(e,t){he("".concat(pe,"/request/all"),"get",{"Content-Type":"application/json"}).then((function(e){return e.json()})).then((function(n){n&&!n.error?e(je({type:Q,requests:n})):t("Error")}))}))}},fe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={loading:!1},r.loginForm=r.loginForm.bind(Object(u.a)(r)),r.inputChange=r.inputChange.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"inputChange",value:function(e){var t=e.target,n=t.name,r=t.value;this.setState(Object(z.a)({},n,r))}},{key:"loginForm",value:function(e){e.preventDefault();var t=this.state.username,n=this.state.password;this.login(t,n)}},{key:"login",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({loading:!0}),be.login(e,t,r,!0).then((function(e){n.setState({loading:!1}),e.error?alert(e.error):e.loggedIn&&n.props.changeLogin(!0)})).catch((function(e){console.log(e),alert("There has been an error, Petio may be temporarily unavailable"),localStorage.removeItem("loggedin")}))}},{key:"loginLocal",value:function(){localStorage.getItem("loggedin")&&("true"===localStorage.getItem("adminloggedin")?this.login("",!1,!0,!0):localStorage.removeItem("loggedin"))}},{key:"componentDidMount",value:function(){this.loginLocal()}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"login-wrap",children:this.state.loading?Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)(K,{})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"login--inner",children:[Object(r.jsxs)("h1",{className:"logo",children:["Pet",Object(r.jsx)("span",{children:"io"})]}),Object(r.jsx)("p",{className:"main-title",children:"Login"}),Object(r.jsx)("p",{children:"Log in with your Plex username / password"}),Object(r.jsxs)("form",{onSubmit:this.loginForm,autoComplete:"on",children:[Object(r.jsx)("p",{children:"Username"}),Object(r.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.inputChange,autoComplete:"username"}),Object(r.jsx)("p",{children:"Password"}),Object(r.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.inputChange,autoComplete:"current-password"}),Object(r.jsx)("button",{className:"btn",children:"Login"})]})]}),Object(r.jsx)("p",{className:"powered-by",children:"Petio Admin build (alpha) 0.1.1"})]})})}}]),n}(a.a.Component),ve=n(15),me=n.n(ve),Oe=n(25),ge="http://localhost:32600";function xe(){return ye.apply(this,arguments)}function ye(){return(ye=Object(Oe.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ge,"/trending"),e.abrupt("return",Ee(t).then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t){var n={id:e,type:t};return Ee("".concat(ge,"/history"),{"Content-Type":"application/json"},"post",n).then((function(e){return e.json()}))}function ke(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var n="".concat(ge,"/movie/lookup/").concat(e);return t&&(n="".concat(ge,"/movie/lookup/").concat(e,"/minified")),Ee(n).then((function(e){return e.json()}))}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var n="".concat(ge,"/show/lookup/").concat(e);return t&&(n="".concat(ge,"/show/lookup/").concat(e,"/minified")),Ee(n).then((function(e){return e.json()}))}function Se(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(Oe.a)(me.a.mark((function e(){var t,n,r=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],n="".concat(ge,"/search/").concat(encodeURI(t)),e.abrupt("return",Ee(n).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return!1;var t="".concat(ge,"/person/lookup/").concat(e);return Ee(t).then((function(e){return e.json()}))}function Ee(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={method:n,headers:t};return"post"===n&&(s.body=JSON.stringify(r)),fetch(e,s)}function _e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&B.dispatch(e)}function Ie(){return(Ie=Object(Oe.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:(t=e.sent)&&(t.movies.forEach((function(e){e.isMinified=!0,_e({type:ne,movie:e,id:e.id})})),t.tv.forEach((function(e){e.isMinified=!0,_e({type:re,series:e,id:e.id})})),_e({type:ee,popular:{movies:t.movies,tv:t.tv,people:t.people}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(Oe.a)(me.a.mark((function e(t){var n,r,s=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],e.next=3,ke(t,n);case 3:(r=e.sent).isMinified=n,_e({type:ne,movie:r,id:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(Oe.a)(me.a.mark((function e(t){var n,r,s=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],e.next=3,Ne(t,n);case 3:if((r=e.sent).id){e.next=6;break}return e.abrupt("return",!1);case 6:r.isMinified=n,_e({type:re,series:r,id:t});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(Oe.a)(me.a.mark((function e(t){var n,r,s,a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:n=e.sent,r=n.movies,s=n.tv,a=n.info,_e({type:se,person:a,id:t}),0===r.length?_e({type:ie,cast:{},crew:{},id:t}):_e({type:ie,cast:r.cast,crew:r.crew,id:t}),0===s.length?_e({type:ce,cast:{},crew:{},id:t}):_e({type:ce,cast:s.cast,crew:s.crew,id:t});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return(Re=Object(Oe.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t);case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,t){n||t(),n.movies.forEach((function(e){e.isMinified=!0,_e({type:ne,movie:e,id:e.id})})),n.shows.forEach((function(e){e.isMinified=!0,_e({type:re,series:e,id:e.id})})),_e({type:te,movies:n.movies,series:n.shows,people:n.people}),e()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return(ze=Object(Oe.a)(me.a.mark((function e(t,n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){we(t,n).then((function(t){e(t)})).catch((function(e){console.log(e),r("Error getting plex movies")}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ue={getPopular:function(){return Ie.apply(this,arguments)},movie:Te,series:De,search:function(e){return Re.apply(this,arguments)},clearSearch:function(){_e({type:te,movies:[],series:[],people:[]})},person:function(e){return Ae.apply(this,arguments)},top:function(e){return new Promise((function(t,n){(function(e){var t="".concat(ge,"/top/shows");return"movie"===e&&(t="".concat(ge,"/top/movies")),Ee(t).then((function(e){return e.json()}))})(e).then((function(e){var n=Object.values(e).sort((function(e,t){return e.globalViewCount-t.globalViewCount})).reverse();t(n)})).catch((function(e){console.log(e),n("Error getting plex movies")}))}))},history:function(e,t){return ze.apply(this,arguments)},get_plex_media:function(e,t){return new Promise((function(n,r){(function(e,t){return Ee("".concat(ge,"/plex/lookup/").concat(t,"/").concat(e)).then((function(e){return e.json()}))})(e,t).then((function(e){n(e),_e("movie"===t?{type:ne,movie:Te,id:Te.id}:{type:re,movie:De,id:De.id})})).catch((function(e){r(e)}))}))},bandwidth:function(){return new Promise((function(e,t){Ee("".concat(ge,"/history/bandwidth"),{"Content-Type":"application/json"},"get").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))}))},serverInfo:function(){return new Promise((function(e,t){Ee("".concat(ge,"/history/server"),{"Content-Type":"application/json"},"get").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))}))},currentSessions:function(){return new Promise((function(e,t){Ee("".concat(ge,"/sessions"),{"Content-Type":"application/json"},"get").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))}))},checkConfig:function(){return new Promise((function(e,t){Ee("".concat(ge,"/config")).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){console.log(e),t()}))}))},saveConfig:function(e){return new Promise((function(t,n){(function(e){return Ee("".concat(ge,"/setup/set"),{"Content-Type":"application/json"},"post",e)})(e).then((function(){t()})).catch((function(e){console.log(e),n()}))}))}},qe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"carousel",children:Object(r.jsx)("div",{className:"carousel--inner",children:this.props.children})})}}]),n}(a.a.Component),We=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"carousel-loading",children:[Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-1",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]}),Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-2",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]}),Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-3",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]}),Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-4",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]}),Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-5",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]}),Object(r.jsxs)("div",{className:"carousel-loading-item carousel-loading-item-6",children:[Object(r.jsx)("div",{className:"carousel-loading-item--inner"}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsx)("p",{className:"title",children:Object(r.jsx)("span",{className:"year"})})})]})]})}}]),n}(a.a.Component),Fe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.request;if(!e)return null;var t=e.poster_path?Object(r.jsx)("img",{src:"https://image.tmdb.org/t/p/w200/".concat(e.poster_path),alt:e.title}):Object(r.jsx)("div",{className:"no-poster"}),n=this.props.user.requests[e.id].type;return Object(r.jsx)("div",{"data-key":e.id,className:"card type--movie-tv",children:Object(r.jsxs)("div",{className:"card--inner",children:[Object(r.jsx)(h.b,{to:"/".concat("tv"===n?"series":"movie","/").concat(e.id),className:"full-link"}),Object(r.jsx)("div",{className:"request-count",children:Object.keys(this.props.user.requests[e.id].users).length}),Object(r.jsx)("div",{className:"image-wrap",children:t}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsxs)("p",{className:"title",title:e.title||e.name,children:[e.title||e.name,Object(r.jsx)("span",{className:"year",children:"movie"===n?"(".concat(new Date(e.release_date).getFullYear(),")"):"(".concat(new Date(e.first_air_date).getFullYear()," - ").concat(new Date(e.last_air_date).getFullYear(),")")})]})})]})},e.id)}}]),n}(a.a.Component);Fe=Object(j.f)(Fe);var Ve=Object(b.b)((function(e){return{tmdb:e.tmdb,user:e.user}}))((function(e){return Object(r.jsx)(Fe,{tmdb:e.tmdb,user:e.user,request:e.request})})),Be=n(12),Ke=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"formatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"";var n=1e3,r=t<0?0:t,s=["bps","kbps","mbps","gbps","tbps","pbps","-","-","-"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(r))+s[a]}},{key:"render",value:function(){var e=this;return Object(r.jsx)(Be.e,{width:"100%",height:300,children:Object(r.jsxs)(Be.d,{data:this.props.bandwidth,margin:{top:10,right:0,left:-15,bottom:0},children:[Object(r.jsx)(Be.g,{dataKey:"name",ticks:["2m0s","1m30s","1m0s","30s","0s"]}),Object(r.jsx)(Be.h,{tickFormatter:function(t){return"".concat(e.formatBytes(t))},allowDecimals:!1}),Object(r.jsx)(Be.a,{}),Object(r.jsx)(Be.b,{iconType:"circle",align:"right"}),Object(r.jsx)(Be.f,{}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"Local",stroke:"#e69f23",dot:!1,strokeWidth:2,activeDot:{r:8},isAnimationActive:!1}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"Remote",stroke:"#366dfc",isAnimationActive:!1,dot:!1,strokeWidth:2})]})})}}]),n}(a.a.Component),He=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Be.e,{width:"100%",height:300,children:Object(r.jsxs)(Be.d,{data:this.props.cpu,margin:{top:10,right:0,left:-40,bottom:0},children:[Object(r.jsx)(Be.g,{dataKey:"at"}),Object(r.jsx)(Be.h,{tickFormatter:function(e){return e},allowDecimals:!1,ticks:[0,10,20,30,40,50,60,70,80,90,100],interval:0}),Object(r.jsx)(Be.a,{}),Object(r.jsx)(Be.f,{}),Object(r.jsx)(Be.b,{iconType:"circle",align:"right"}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"processCpuUtilization",stroke:"#9ad186",dot:!1,strokeWidth:2,activeDot:{r:8},isAnimationActive:!1,name:"Plex"}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"hostCpuUtilization",stroke:"#f1335e",dot:!1,strokeWidth:2,isAnimationActive:!1,name:"System"})]})})}}]),n}(a.a.Component),Xe=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Be.e,{width:"100%",height:300,children:Object(r.jsxs)(Be.d,{data:this.props.ram,margin:{top:10,right:0,left:-40,bottom:0},children:[Object(r.jsx)(Be.g,{dataKey:"at"}),Object(r.jsx)(Be.h,{tickFormatter:function(e){return e},allowDecimals:!1,ticks:[0,10,20,30,40,50,60,70,80,90,100],interval:0}),Object(r.jsx)(Be.a,{}),Object(r.jsx)(Be.f,{}),Object(r.jsx)(Be.b,{iconType:"circle",align:"right"}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"processMemoryUtilization",stroke:"#33f1c5",dot:!1,strokeWidth:2,activeDot:{r:8},isAnimationActive:!1,name:"Plex"}),Object(r.jsx)(Be.c,{type:"monotone",dataKey:"hostMemoryUtilization",stroke:"#bd86d1",dot:!1,strokeWidth:2,isAnimationActive:!1,name:"System"})]})})}}]),n}(a.a.Component),Ye=n(53);n(97);function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Qe=s.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"});function $e(e,t){var n=e.title,r=e.titleId,a=Je(e,["title","titleId"]);return s.createElement("svg",Ge({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,Qe)}var Ze=s.forwardRef($e);n.p;function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var nt=s.createElement("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"});function rt(e,t){var n=e.title,r=e.titleId,a=tt(e,["title","titleId"]);return s.createElement("svg",et({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pause",className:"svg-inline--fa fa-pause fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,nt)}var st=s.forwardRef(rt);n.p;function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function it(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var ct=s.createElement("path",{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"});function ot(e,t){var n=e.title,r=e.titleId,a=it(e,["title","titleId"]);return s.createElement("svg",at({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",className:"svg-inline--fa fa-spinner fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,ct)}var lt=s.forwardRef(ot),ut=(n.p,function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={onServer:!1,imdbId:!1,tmdbId:!1},r.getMovie=r.getMovie.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getMovie()}},{key:"componentDidUpdate",value:function(){this.getMovie()}},{key:"getMovie",value:function(){var e=this.props.movie.id;if(!this.props.api.movie_lookup[e]){if(!e)return!1;Ue.movie(e,!0)}}},{key:"render",value:function(){var e=this.props.movie.id,t=this.props.api.movie_lookup[e];if(!e||"false"===e)return null;if(!t)return Object(r.jsx)("div",{"data-key":this.props.key,className:"card type--movie-tv ",children:Object(r.jsxs)("div",{className:"card--inner",children:[Object(r.jsx)(h.b,{to:"/movie/".concat(e),className:"full-link"}),Object(r.jsx)("div",{className:"image-wrap",children:Object(r.jsx)("div",{className:"no-poster"})}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsxs)("p",{className:"title",children:["Loading...",Object(r.jsx)("span",{className:"year"})]})})]})},this.props.key);var n=t.poster_path?Object(r.jsx)(Ye.LazyLoadImage,{alt:t.title,src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path)}):Object(r.jsx)("div",{className:"no-poster"}),s=null;switch(this.props.playbackState){case"playing":case"streaming":s=Object(r.jsx)(Ze,{});break;case"paused":s=Object(r.jsx)(st,{});break;case"buffering":s=Object(r.jsx)(lt,{});break;default:s=Object(r.jsx)("p",{children:this.props.playbackState})}return Object(r.jsx)("div",{"data-key":this.props.key,className:"card type--movie-tv "+(t.on_server?"on-server":""),children:Object(r.jsxs)("div",{className:"card--inner",children:[Object(r.jsx)(h.b,{to:"/movie/".concat(t.id),className:"full-link"}),Object(r.jsxs)("div",{className:"image-wrap",children:[this.props.progress?Object(r.jsx)("div",{className:"session--duration",children:Object(r.jsx)("div",{className:"session--prog",style:{maxWidth:this.props.progress+"%"}})}):null,n,Object(r.jsx)("div",{className:"playback-status",children:s})]}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsxs)("p",{className:"title",title:t.title,children:[t.title,Object(r.jsx)("span",{className:"year",children:this.props.character?this.props.character:t.release_date?"("+new Date(t.release_date).getFullYear()+")":null})]})})]})},this.props.key)}}]),n}(a.a.Component));ut=Object(j.f)(ut);var pt=Object(b.b)((function(e){return{api:e.api}}))((function(e){return Object(r.jsx)(ut,{api:e.api,movie:e.movie,character:e.character,progress:e.progress,playbackState:e.playbackState})})),dt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={onServer:!1,imdbId:!1,tmdbId:!1},r.getMovie=r.getSeries.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getSeries()}},{key:"getSeries",value:function(){var e=this.props.series.id;if(!this.props.api.series_lookup[e]){if(!e)return!1;Ue.series(e,!0)}}},{key:"render",value:function(){var e=this.props.series.id;if(!e||"false"===e)return null;var t=this.props.api.series_lookup[e];if(!t)return Object(r.jsx)("div",{"data-key":this.props.key,className:"card type--movie-tv ",children:Object(r.jsxs)("div",{className:"card--inner",children:[Object(r.jsx)(h.b,{to:"/series/".concat(e),className:"full-link"}),Object(r.jsx)("div",{className:"image-wrap",children:Object(r.jsx)("div",{className:"no-poster"})}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsxs)("p",{className:"title",children:["Loading...",Object(r.jsx)("span",{className:"year"})]})})]})},this.props.key);var n=t.poster_path?Object(r.jsx)(Ye.LazyLoadImage,{alt:t.title,src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path)}):Object(r.jsx)("div",{className:"no-poster"}),s=null;switch(this.props.playbackState){case"playing":case"streaming":s=Object(r.jsx)(Ze,{});break;case"paused":s=Object(r.jsx)(st,{});break;case"buffering":s=Object(r.jsx)(lt,{});break;default:s=Object(r.jsx)("p",{children:this.props.playbackState})}return Object(r.jsx)("div",{"data-key":this.props.key,className:"card type--movie-tv "+(t.on_server?"on-server":""),children:Object(r.jsxs)("div",{className:"card--inner",children:[Object(r.jsx)(h.b,{to:"/series/".concat(t.id),className:"full-link"}),Object(r.jsxs)("div",{className:"image-wrap",children:[this.props.progress?Object(r.jsx)("div",{className:"session--duration",children:Object(r.jsx)("div",{className:"session--prog",style:{maxWidth:this.props.progress+"%"}})}):null,n,Object(r.jsx)("div",{className:"playback-status",children:s})]}),Object(r.jsx)("div",{className:"text-wrap",children:Object(r.jsxs)("p",{className:"title",children:[t.name,Object(r.jsx)("span",{className:"year",children:this.props.character?this.props.character:"("+new Date(t.first_air_date).getFullYear()+")"})]})})]})},this.props.key)}}]),n}(a.a.Component);dt=Object(j.f)(dt);var ht=Object(b.b)((function(e){return{api:e.api}}))((function(e){return Object(r.jsx)(dt,{api:e.api,series:e.series,character:e.character,progress:e.progress,playbackState:e.playbackState})})),jt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={id:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.live||"clip"===this.props.type||("movie"===this.props.type?this.getMovie():this.getSeries())}},{key:"componentDidUpdate",value:function(){this.props.live||this.state.id||"clip"===this.props.type||("movie"===this.props.type?this.getMovie():this.getSeries())}},{key:"getMovie",value:function(){var e=this;Ue.get_plex_media(this.props.id,"movie").then((function(t){e.setState({id:t.tmdb_id})}))}},{key:"getSeries",value:function(){var e=this;Ue.get_plex_media(this.props.id,"tv").then((function(t){e.setState({id:t.tmdb_id})}))}},{key:"render",value:function(){var e=null;return this.state.id||this.props.live||"clip"===this.props.type?(e=this.props.live||"clip"===this.props.type||"trailer"===this.props.type?Object(r.jsxs)("div",{className:"card type--generic",children:[Object(r.jsx)("div",{className:"card--inner"}),Object(r.jsx)("div",{className:"image-wrap",children:this.props.progress?Object(r.jsx)("div",{className:"session--duration",children:Object(r.jsx)("div",{className:"session--prog",style:{maxWidth:this.props.progress+"%"}})}):null})]},this.props.uid):"movie"===this.props.type?Object(r.jsx)(pt,{movie:{id:this.state.id},progress:this.props.progress,playbackState:this.props.playbackState},this.props.uid):Object(r.jsx)(ht,{series:{id:this.state.id},progress:this.props.progress,playbackState:this.props.playbackState},this.props.uid),Object(r.jsx)("div",{className:"session--media",children:Object(r.jsxs)("div",{className:"session--media--inner",children:[Object(r.jsx)("div",{className:"session--user",children:Object(r.jsx)("img",{src:this.props.userThumb})}),e]})})):null}}]),n}(a.a.Component);function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var vt=s.createElement("path",{fill:"currentColor",d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"});function mt(e,t){var n=e.title,r=e.titleId,a=ft(e,["title","titleId"]);return s.createElement("svg",bt({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-right",className:"svg-inline--fa fa-long-arrow-alt-right fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,vt)}var Ot=s.forwardRef(mt);n.p;function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xt(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var yt=s.createElement("path",{fill:"currentColor",d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"});function wt(e,t){var n=e.title,r=e.titleId,a=xt(e,["title","titleId"]);return s.createElement("svg",gt({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock",className:"svg-inline--fa fa-lock fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,yt)}var kt=s.forwardRef(wt);n.p;function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function St(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Pt=s.createElement("path",{fill:"currentColor",d:"M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"});function Ct(e,t){var n=e.title,r=e.titleId,a=St(e,["title","titleId"]);return s.createElement("svg",Nt({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"unlock",className:"svg-inline--fa fa-unlock fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,Pt)}var Et=s.forwardRef(Ct),_t=(n.p,function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"formatAudio",value:function(e){switch(e){case"1":return"(Mono)";case"2":return"(Stereo)";case"5":return"(5.1)";case"6":return"(6.1)";case"7":return"(7.1)";default:return"(".concat(e,")")}}},{key:"playbackDetails",value:function(e,t,n){if(!e.Part)return null;var s,a;switch(t){case"unknown":a="Unknown";break;case"directplay":a="Direct Play";break;case"transcode":a=n.TranscodeSession?"copy"===n.TranscodeSession.videoDecision?"Direct Stream":"transcode"===n.TranscodeSession.videoDecision?"Transcode\n\t\t\t\t\t\t\t\t\t(".concat(n.TranscodeSession.transcodeHwEncodingTitle,")"):"Unknown Transcode":"...";break;default:a=t}return(s=e.Part[0].Stream[0].bitrate)>1e3?s=Math.ceil(s/1e3)+" mbps":s+=" kbps",Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:a}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"Video"})}),"transcode"===e.Part[0].Stream[0].decision||"copy"===e.Part[0].Stream[0].decision?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:"session--container",children:[Object(r.jsx)("span",{className:"session--label",children:"Container:"}),Object(r.jsx)("span",{className:"upper",children:e.container}),Object(r.jsx)(Ot,{}),Object(r.jsx)("span",{className:"upper",children:e.Part[0].container})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"session--label",children:"Quality:"}),s+" "+e.Part[0].Stream[0].extendedDisplayTitle]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:"session--container",children:[Object(r.jsx)("span",{className:"session--label",children:"Container:"}),Object(r.jsx)("span",{className:"upper",children:e.Part[0].container})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"session--label",children:"Quality:"}),s+" "+e.Part[0].Stream[0].extendedDisplayTitle]})]}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"Audio"})}),"transcode"===e.Part[0].Stream[1].decision?Object(r.jsxs)("p",{children:[e.Part[0].Stream[1].extendedDisplayTitle,Object(r.jsx)(Ot,{}),Object(r.jsxs)("span",{className:"upper",children:[e.Part[0].Stream[1].codec,"\xa0"]}),this.formatAudio(e.Part[0].Stream[1].channels)]}):Object(r.jsx)("p",{children:e.Part[0].Stream[1].extendedDisplayTitle}),Object(r.jsx)("p",{children:Object(r.jsx)("strong",{children:"Player"})}),Object(r.jsx)("p",{children:n.Player.title+" ("+n.Player.product+")"}),Object(r.jsxs)("p",{children:[n.Player.local?"Local":"Remote"," ",n.Player.address," ",Object(r.jsx)("div",{className:"session--secure secure-"+n.Player.secure,children:n.Player.secure?Object(r.jsx)(kt,{}):Object(r.jsx)(Et,{})})]})]})}},{key:"render",value:function(){var e=this;if(this.props.sessions){var t=this.props.sessions;return 0===t.length?Object(r.jsx)("p",{children:"No active sessions"}):Object(r.jsx)("div",{className:"sessions",children:t.map((function(t){var n=null,s=!1;t.Media.map((function(e){e.selected&&(s=e)}));var a=s.Part?s.Part[0].decision:"unknown";switch(t.type){case"episode":n=t.grandparentRatingKey;break;case"movie":n=t.ratingKey}return Object(r.jsxs)("div",{className:"session","data-id":t.Session?t.Session.id:"pending",children:[Object(r.jsx)(jt,{id:n,uid:t.Player.machineIdentifier+t.ratingKey,type:t.type,userThumb:t.User.thumb,live:!!t.live,progress:t.Media.length>0&&t.viewOffset?t.viewOffset/t.Media[0].duration*100:0,playbackState:t.Player.state}),Object(r.jsxs)("div",{className:"session--info",children:[Object(r.jsx)("p",{className:"session--title",children:t.title+(t.live?" (Live)":"")}),"episode"===t.type?Object(r.jsx)("p",{className:"session--show",children:t.grandparentTitle+(t.parentTitle?" | "+t.parentTitle:"")}):null,Object(r.jsxs)("div",{className:"session--playback",children:[Object(r.jsx)("p",{className:"session--title",children:"Playback Info"}),e.playbackDetails(s,a,t)]}),Object(r.jsx)("hr",{})]})]},t.Player.machineIdentifier+t.ratingKey+"__session")}))})}return Object(r.jsx)("p",{children:"No active sessions"})}}]),n}(a.a.Component));Number.prototype.round=function(e){return+(Math.round(this+"e+"+e)+"e-"+e)};var It=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={requests:!1,pending:!1,bandwidth:!1,serverInfo:!1,sessions:!1,sessionsCollapsed:!0},r.getRequests=r.getRequests.bind(Object(u.a)(r)),r.toggleSessions=r.toggleSessions.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.pending||this.state.requests||this.getRequests(),this.pollServer(),this.pollServerDelay(),this.heartbeat=setInterval((function(){return e.pollServer()}),1e3),this.heartbeatDelay=setInterval((function(){return e.pollServerDelay()}),1e4)}},{key:"componentDidUpdate",value:function(){this.state.pending||this.state.requests||this.getRequests()}},{key:"componentWillUnmount",value:function(){clearInterval(this.heartbeat),clearInterval(this.heartbeatDelay)}},{key:"timeDifference",value:function(e){var t=new Date,n=Math.round(t.getTime()/1e3),r=n-(e=new Date(e));if(r<60)return Math.round(r)+"s";if(r<3600){var s=Math.floor(r/60),a=r-60*s;return!(2===s&&a>1)&&"".concat(s,"m").concat(a,"s")}return n}},{key:"pollServer",value:function(){var e=this;Ue.bandwidth().then((function(t){var n={},r=[];t.forEach((function(t){var r=t.lan?"Local":"Remote",s=t.at;if(n[s])n[s][r]+=8*t.bytes;else{var a=e.timeDifference(s);if(!a)return;n[s]={},n[s].name=a,n[s].Local=0,n[s].Remote=0,n[s][r]=8*t.bytes}})),Object.keys(n).map((function(e){r.push(n[e])})),e.setState({bandwidth:r})})).catch((function(t){console.log(t),clearInterval(e.heartbeat)}))}},{key:"pollServerDelay",value:function(){var e=this;Ue.serverInfo().then((function(t){var n=t.StatisticsResources,r=[];n.map((function(t){var n=e.timeDifference(t.at);t.at=n,n&&r.push(t)})),e.setState({serverInfo:r})})).catch((function(e){console.log(e)})),Ue.currentSessions().then((function(t){e.setState({sessions:t.Metadata})})).catch((function(e){console.log(e)}))}},{key:"toggleSessions",value:function(){this.setState({sessionsCollapsed:!this.state.sessionsCollapsed})}},{key:"getRequests",value:function(){var e=this.props.user.requests;e?(this.setState({requests:!0,pending:!0}),Object.keys(e).map((function(t){"movie"===e[t].type?Ue.movie(t):Ue.series(t)})),this.setState({pending:!1})):be.getRequests()}},{key:"render",value:function(){var e=this,t=this.props.user.requests;return Object(r.jsxs)("div",{className:"widget--board",children:[Object(r.jsxs)("div",{className:"widget--item widget--item__30",children:[Object(r.jsx)("div",{className:"widget--title",children:"Bandwidth"}),Object(r.jsx)("hr",{}),this.state.bandwidth?Object(r.jsx)(Ke,{bandwidth:this.state.bandwidth}):null]}),Object(r.jsxs)("div",{className:"widget--item widget--item__30",children:[Object(r.jsx)("div",{className:"widget--title",children:"CPU"}),Object(r.jsx)("hr",{}),this.state.serverInfo?Object(r.jsx)(He,{cpu:this.state.serverInfo}):null]}),Object(r.jsxs)("div",{className:"widget--item widget--item__30",children:[Object(r.jsx)("div",{className:"widget--title",children:"RAM"}),Object(r.jsx)("hr",{}),this.state.serverInfo?Object(r.jsx)(Xe,{ram:this.state.serverInfo}):null]}),Object(r.jsxs)("div",{className:"widget--item",children:[Object(r.jsx)("div",{className:"widget--title",children:"Requests"}),Object(r.jsx)("hr",{}),t?Object(r.jsx)(qe,{children:Object.keys(t).map((function(n){var s=e.props.api.movie_lookup[n];return"tv"===t[n].type&&(s=e.props.api.series_lookup[n]),s?Object(r.jsx)(Ve,{request:s},n):null}))}):Object(r.jsx)(We,{})]}),Object(r.jsxs)("div",{className:"widget--item widget--item__50 "+(this.state.sessionsCollapsed?"collapsed":""),children:[Object(r.jsx)("div",{className:"session--toggle",onClick:this.toggleSessions,children:this.state.sessionsCollapsed?"Details":"Overview"}),Object(r.jsx)("div",{className:"widget--title",children:"Now Playing"}),Object(r.jsx)("hr",{}),Object(r.jsx)(_t,{sessions:this.state.sessions})]}),Object(r.jsxs)("div",{className:"widget--item widget--item__50",children:[Object(r.jsx)("div",{className:"widget--title",children:"Issues"}),Object(r.jsx)("hr",{})]})]})}}]),n}(a.a.Component),Tt=n(165),Mt={"Content-Type":"application/json",Accept:"application/json","X-Plex-Device":"API","X-Plex-Device-Name":"DeviceName","X-Plex-Product":"Petio","X-Plex-Version":"v1.0","X-Plex-Platform-Version":"v1.0","X-Plex-Client-Identifier":"df9e71a5-a6cd-488e-8730-aaa9195f7435"};function Dt(e){return Rt("https://plex.tv/api/v2/pins/".concat(e),Mt,"get").then((function(e){return e.json()}))}function Lt(e){return Rt("https://plex.tv/users/account?X-Plex-Token=".concat(e),Mt,"get").then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}))}function At(e){return Rt("https://plex.tv/pms/servers?X-Plex-Token=".concat(e),Mt,"get").then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}))}function Rt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={method:n,headers:t};return"post"===n&&(s.body=r),fetch(e,s)}function zt(e){Vt({type:$,token:e})}function Ut(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Object(Oe.a)(me.a.mark((function e(t,n){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(n);case 2:r=e.sent,console.log(r),r.authToken?(t.close(),zt(r.authToken),Wt(r.authToken)):t.closed?alert("Unable to login please try again"):setTimeout((function(){Ut(t,n)}),1e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(Oe.a)(me.a.mark((function e(t){var n,r,s,a,i,c,o,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={user:{},servers:{}},e.next=3,Lt(t);case 3:return r=e.sent,e.next=6,At(t);case 6:s=e.sent,a=s.getElementsByTagName("MediaContainer")[0].getElementsByTagName("Server"),i=r.getElementsByTagName("user")[0],n.user.email=i.getAttribute("email"),n.user.id=i.getAttribute("id"),n.user.username=i.getAttribute("title"),c=Object(Tt.a)(a);try{for(c.s();!(o=c.n()).done;)"1"===(l=o.value).getAttribute("owned")&&(n.servers[l.getAttribute("machineIdentifier")]={name:l.getAttribute("name"),host:l.getAttribute("host"),port:l.getAttribute("port")})}catch(u){c.e(u)}finally{c.f()}Vt({type:Z,servers:n.servers,user:n.user}),console.log(n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&B.dispatch(e)}var Bt={plexAuth:function(e){e.document.body.innerHTML='<style>.login-loader-container {font-family: "Open Sans", Arial, sans-serif;position: absolute;top: 0;right: 0;bottom: 0;left: 0;}.login-loader-message {color: #282A2D;text-align: center;position: absolute;left: 50%;top: 25%;transform: translate(-50%, -50%);}.login-loader {border: 5px solid #ccc;-webkit-animation: spin 1s linear infinite;animation: spin 1s linear infinite;border-top: 5px solid #282A2D;border-radius: 50%;width: 50px;height: 50px;position: relative;left: calc(50% - 25px);}@keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}</style><div class="login-loader-container"><div class="login-loader-message"><div class="login-loader"></div><br>Redirecting to the Plex login page...</div></div>',Rt("https://plex.tv/api/v2/pins?strong=true",Mt,"post").then((function(e){return e.json()})).then((function(t){e.location.href="https://app.plex.tv/auth/#!?clientID=df9e71a5-a6cd-488e-8730-aaa9195f7435&code=".concat(t.code),Ut(e,t.id)})).catch((function(){alert("Unable to open popout window, please make sure to allow pop-ups!")}))}},Kt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={step:1},r.inputChange=r.inputChange.bind(Object(u.a)(r)),r.saveUser=r.saveUser.bind(Object(u.a)(r)),r.selectServer=r.selectServer.bind(Object(u.a)(r)),r.changeToDb=r.changeToDb.bind(Object(u.a)(r)),r.finalise=r.finalise.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"inputChange",value:function(e){var t=e.target,n=t.name,r=t.value;this.setState(Object(z.a)({},n,r))}},{key:"componentDidUpdate",value:function(){this.props.plex.user&&1===this.state.step&&this.setState({step:2}),this.state.user&&2===this.state.step&&this.setState({step:3})}},{key:"loginOauth",value:function(e){var t=function(e,t,n,r){var s=void 0!=window.screenLeft?window.screenLeft:window.screenX,a=void 0!=window.screenTop?window.screenTop:window.screenY,i=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+s,c=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-r/2+a,o=window.open(e,t,"scrollbars=yes, width="+n+", height="+r+", top="+c+", left="+i);return console.log("scrollbars=yes, width="+n+", height="+r+", top="+c+", left="+i),window.focus&&o.focus(),o}("","Login with Plex",500,500);Bt.plexAuth(t)}},{key:"saveUser",value:function(){var e=this.state.password,t=this.props.plex.user.username,n=this.props.plex.user.username,r=this.props.plex.user.email,s=this.props.plex.token;this.setState({user:{username:t,id:n,email:r,password:e,token:s},password:!1})}},{key:"selectServer",value:function(e){var t=e.target;console.log(t);var n=t.dataset.id;this.setState({selectedServer:n})}},{key:"changeToDb",value:function(){this.setState({step:4})}},{key:"finalise",value:function(){var e=this;this.setState({step:5});var t=this.props.plex.servers[this.state.selectedServer],n={user:this.state.user,server:t,db:this.state.db};Ue.saveConfig(n).then((function(){setTimeout((function(){e.props.checkConfig()}),1e4)})).catch((function(e){alert("Setup failed, check API is running and no errors, if this persists please contact the dev team.")}))}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"setup--wrap",children:[Object(r.jsx)("p",{className:"main-title",children:"Setup"}),1===this.state.step?Object(r.jsxs)("div",{className:"step-1",children:[Object(r.jsx)("p",{children:"Welcome to Petio, firstly lets log in to Plex to get all of your user and server info"}),Object(r.jsx)("button",{className:"btn",onClick:this.loginOauth,children:"Login with plex"})]}):null,2===this.state.step?Object(r.jsxs)("div",{className:"step-2",children:[Object(r.jsx)("p",{children:"This is your Petio admin user details, we will use your Plex Username / Email, but a custom password just for Petio can be used."}),Object(r.jsx)("p",{children:"Petio Admin Username"}),Object(r.jsx)("input",{type:"text",name:"username",value:this.props.plex.user.username,readOnly:!0}),Object(r.jsx)("p",{children:"Petio Admin Email"}),Object(r.jsx)("input",{type:"email",name:"email",value:this.props.plex.user.email,readOnly:!0}),Object(r.jsx)("p",{children:"Petio Admin Password"}),Object(r.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.inputChange}),Object(r.jsx)("button",{className:"btn",onClick:this.saveUser,children:"Next"})]}):null,3===this.state.step?Object(r.jsxs)("div",{className:"step-3",children:[Object(r.jsx)("p",{children:"Please select your server"}),0===Object.keys(this.props.plex.servers).length?Object(r.jsx)("p",{children:"You don't own any servers. Only the server owner can setup a Petio instance."}):Object.keys(this.props.plex.servers).map((function(t){var n=e.props.plex.servers[t];return Object(r.jsx)("div",{className:"server-select-option "+(e.state.selectedServer===t?"selected":""),"data-id":t,onClick:e.selectServer,children:Object(r.jsx)("p",{children:n.name})},t)})),Object(r.jsx)("button",{className:"btn "+(this.state.selectedServer?"":"disabled"),style:{marginTop:"10px"},onClick:this.changeToDb,children:"Next"})]}):null,4===this.state.step?Object(r.jsxs)("div",{className:"step-4",children:[Object(r.jsx)("p",{children:"Mongo Database path, leave this as default unless you have configured your databse differently to recommended."}),Object(r.jsx)("input",{type:"text",name:"db",value:this.state.db,onChange:this.inputChange}),Object(r.jsx)("button",{className:"btn",style:{marginTop:"10px"},onClick:this.finalise,children:"Next"})]}):null,5===this.state.step?Object(r.jsxs)("div",{className:"step-5",children:[Object(r.jsx)("p",{children:"Getting things set up..."}),Object(r.jsx)("div",{className:"loading",children:Object(r.jsx)(K,{})})]}):null]})}}]),n}(a.a.Component);var Ht=Object(b.b)((function(e){return{plex:e.plex,api:e.api,user:e.user}}))((function(e){return Object(r.jsx)(Kt,{plex:e.plex,api:e.api,user:e.user,checkConfig:e.checkConfig})})),Xt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={isLoggedIn:!1,loading:!0,config:!1},r.changeLogin=r.changeLogin.bind(Object(u.a)(r)),r.checkConfig=r.checkConfig.bind(Object(u.a)(r)),r}return Object(l.a)(n,[{key:"checkConfig",value:function(){var e=this;Ue.checkConfig().then((function(t){console.log(t),e.setState({config:t.config,loading:!1})})).catch((function(){alert("The Api Service is not running")}))}},{key:"changeLogin",value:function(e){this.setState({isLoggedIn:e})}},{key:"componentDidMount",value:function(){this.checkConfig()}},{key:"render",value:function(){return this.state.loading?Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)(K,{})}):!1===this.state.config?Object(r.jsx)("div",{className:"app",children:Object(r.jsx)(Ht,{checkConfig:this.checkConfig})}):this.state.isLoggedIn?Object(r.jsx)("div",{className:"app",children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(R,{}),Object(r.jsx)("div",{className:"view",children:Object(r.jsx)(j.c,{children:Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(It,{user:this.props.user,api:this.props.api})})})})]})}):Object(r.jsx)("div",{className:"app",children:Object(r.jsx)(fe,{logged_in:this.state.isLoggedIn,changeLogin:this.changeLogin})})}}]),n}(a.a.Component);var Yt=Object(b.b)((function(e){return{plex:e.plex,api:e.api,user:e.user}}))((function(e){return Object(r.jsx)(Xt,{plex:e.plex,api:e.api,user:e.user})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(387);var Gt=function(){var e;B=Object(H.createStore)(oe,Object(ue.composeWithDevTools)(),e,Object(H.applyMiddleware)(le.a)),c.a.render(Object(r.jsx)(b.a,{store:B,children:Object(r.jsx)(Yt,{})}),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",Gt,!1):Gt(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[388,1,2]]]);
//# sourceMappingURL=main.4cfeaabd.chunk.js.map