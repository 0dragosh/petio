(this.webpackJsonppetio=this.webpackJsonppetio||[]).push([[0],{35:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),l=a(22),c=a.n(l),i=a(14),o=a(3),u=a(4),m=a(2),p=a(6),d=a(5),v=a(7),h=a(10),b=a(8),f=a(11),E=a.n(f),g=a(17),y=a(19),O=a(1),w=Object(y.combineReducers)({plex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLEX_TOKEN":return Object(O.a)(Object(O.a)({},e),{},{token:t.token});default:return e}},mediabutler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user_roles:{permissions:[],rules:[],seen_clients:[],blocked_clients:[],_id:!1,username:!1,owner:!1,__v:0},logged_in:!1,servers:!1,config:"pending",activeServer:!1,popular:{},movie_lookup:{},series_lookup:{},season_lookup:{},person_lookup:{},search_results:{movies:[],series:[],people:[]},actor_movie:{},actor_series:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MB_LOGIN":return Object(O.a)(Object(O.a)({},e),{},{current_user:{username:t.username,email:t.email,thumb:t.thumb},servers:t.servers,logged_in:!0});case"MB_USER_ROLES":return Object(O.a)(Object(O.a)({},e),{},{user_roles:t.user});case"MB_CONFIG_SETUP_START":return Object(O.a)(Object(O.a)({},e),{},{config:!1});case"MB_CONFIG_LOADED":case"MB_CONFIG_SETUP_END":return Object(O.a)(Object(O.a)({},e),{},{config:t.config});case"MB_ACTIVE_SERVER":return Object(O.a)(Object(O.a)({},e),{},{activeServer:t.server});case"POPULAR":return Object(O.a)(Object(O.a)({},e),{},{popular:t.popular,updated:!0});case"SEARCH":return Object(O.a)(Object(O.a)({},e),{},{search_results:{movies:t.movies,series:t.series,people:t.people}});case"MOVIE_LOOKUP":var a={};return t.movie&&t.movie.credits&&Object.keys(t.movie.credits).forEach((function(e){Object.keys(t.movie.credits[e]).forEach((function(r){a[t.movie.credits[e][r].id]=t.movie.credits[e][r]}))})),Object(O.a)(Object(O.a)({},e),{},{movie_lookup:Object(O.a)(Object(O.a)({},e.movie_lookup),{},Object(i.a)({},t.id,t.movie)),actor_cache:{creditCache:a},updated:!0});case"PERSON_LOOKUP":return Object(O.a)(Object(O.a)({},e),{},{person_lookup:Object(O.a)(Object(O.a)({},e.movie_lookup),{},Object(i.a)({},t.id,t.person)),updated:!0});case"SERIES_LOOKUP":var r={};return t.series&&t.series.credits&&Object.keys(t.series.credits).forEach((function(e){Object.keys(t.series.credits[e]).forEach((function(a){r[t.series.credits[e][a].id]=t.series.credits[e][a]}))})),Object(O.a)(Object(O.a)({},e),{},{series_lookup:Object(O.a)(Object(O.a)({},e.series_lookup),{},Object(i.a)({},t.id,t.series)),actor_cache:{creditCacheS:r},updated:!0});case"SEASON_LOOKUP":return Object(O.a)(Object(O.a)({},e),{},{season_lookup:Object(O.a)(Object(O.a)({},e.season_lookup),{},Object(i.a)({},"".concat(t.series,"_s").concat(t.season),t.data))});case"STORE_ACTOR_MOVIE":return Object(O.a)(Object(O.a)({},e),{},{actor_movie:Object(O.a)(Object(O.a)({},e.actor_movie),{},Object(i.a)({},t.id,{cast:t.cast,crew:t.crew})),updated:!0});case"STORE_ACTOR_SERIES":return Object(O.a)(Object(O.a)({},e),{},{actor_series:Object(O.a)(Object(O.a)({},e.actor_series),{},Object(i.a)({},t.id,{cast:t.cast,crew:t.crew})),updated:!0});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:!1,logged_in:!1,credentials:!1,library_index:!1,requests:!1,email:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(O.a)(Object(O.a)({},e),{},{current:t.data.user,logged_in:!0});case"LOGOUT":return Object(O.a)(Object(O.a)({},e),{},{current:!1,logged_in:!1,credentials:!1});case"CREDENTIALS":return Object(O.a)(Object(O.a)({},e),{},{credentials:t.credentials});case"CREDENTIALS_EMAIL":return Object(O.a)(Object(O.a)({},e),{},{email:t.credentials});case"LIBRARIES_INDEX":return Object(O.a)(Object(O.a)({},e),{},{library_index:t.libraries});case"LOGIN_ADMIN":return Object(O.a)(Object(O.a)({},e),{},{logged_in:!0,credentials:{plexToken:t.credentials.token},current:t.credentials.username});case"GET_REQUESTS":return Object(O.a)(Object(O.a)({},e),{},{requests:t.requests});case"GET_REVIEWS":return Object(O.a)(Object(O.a)({},e),{},{reviews:Object(O.a)(Object(O.a)({},e.reviews),{},Object(i.a)({},t.id,t.reviews))});default:return e}}}),N=a(32),j=a(33);function k(){fetch("./config.json").then((function(e){return e.json()})).then((function(e){S({type:"CREDENTIALS",credentials:{api:e.PlexRequestApi+":"+e.PlexRequestApiPort}})})).catch((function(){S({type:"CREDENTIALS",credentials:{api:"http://localhost:32600"}})}))}function _(){return r.getState().user.credentials}function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&r.dispatch(e)}function R(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];console.log(_().api);var n="".concat(_().api,"/login"),s={"Content-Type":"application/json"};return x(n,"post",s,{username:e,password:t,admin:a,authToken:r}).then((function(e){return e.json()}))}function x(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n={headers:a,method:t};return"post"===t&&(n.body=JSON.stringify(r)),fetch(e,n)}function q(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&r.dispatch(e)}var C={login:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,s){var l=e,c=t,i=!1;if(a){var o=localStorage.getItem("loggedin"),u=window.atob(o);r?i=u:l=u}R(l,c,r,i).then((function(e){if(e.user){var t=window.btoa(e.user.title);if(e.admin?(e.user.admin=!0,t=window.btoa(e.user.authToken),localStorage.setItem("adminloggedin",!0)):localStorage.setItem("adminloggedin",!1),!e.loggedIn&&!e.admin)return alert("Invalid Login"),void n({error:"User not found"});a||localStorage.setItem("loggedin",t),q({type:"LOGIN",data:e}),n(e)}else n({error:"User not found"})})).catch((function(e){alert(e),s("Error")}))}))},logout:function(){q({type:"LOGOUT"}),k()},request:function(e,t){return new Promise((function(a,r){(function(e,t){var a="".concat(_().api,"/request/add");return x(a,"post",{"Content-Type":"application/json"},{request:e,user:t}).then((function(e){return e.json()}))})(e,t).then((function(e){e&&!e.error?a(q({type:"GET_REQUESTS",requests:e})):r("Error")}))}))},getRequests:function(){return new Promise((function(e,t){x("".concat(_().api,"/request/all"),"get",{"Content-Type":"application/json"}).then((function(e){return e.json()})).then((function(a){a&&!a.error?e(q({type:"GET_REQUESTS",requests:a})):t("Error")}))}))},review:function(e,t,a){!function(e,t,a){x("".concat(_().api,"/review/add"),"post",{"Content-Type":"application/json"},{item:{title:e.title,thumb:e.thumb,id:e.id},user:t,review:a}).then((function(e){return e.json()}))}(e,t,a)},getReviews:function(e){return new Promise((function(t,a){(function(e){if(e){return x("".concat(_().api,"/review/all/").concat(e),"get",{"Content-Type":"application/json"}).then((function(e){return e.json()}))}})(e).then((function(r){r&&!r.error?t(q({type:"GET_REVIEWS",reviews:r,id:e})):a("Error")}))}))}};function I(){return M.apply(this,arguments)}function M(){return(M=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(_().api,"/trending"),e.abrupt("return",V(t).then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){var a={id:e,type:t};return V("".concat(_().api,"/history"),{"Content-Type":"application/json"},"post",a).then((function(e){return e.json()}))}function P(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var a="".concat(_().api,"/movie/lookup/").concat(e);return t&&(a="".concat(_().api,"/movie/lookup/").concat(e,"/minified")),V(a).then((function(e){return e.json()}))}function L(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var a="".concat(_().api,"/show/lookup/").concat(e);return t&&(a="".concat(_().api,"/show/lookup/").concat(e,"/minified")),V(a).then((function(e){return e.json()}))}function D(){return z.apply(this,arguments)}function z(){return(z=Object(g.a)(E.a.mark((function e(){var t,a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],a="".concat(_().api,"/search/").concat(encodeURI(t)),e.abrupt("return",V(a).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return!1;var t="".concat(_().api,"/person/lookup/").concat(e);return V(t).then((function(e){return e.json()}))}function V(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n={method:a,headers:t};return"post"===a&&(n.body=JSON.stringify(r)),fetch(e,n)}function H(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!e&&r.dispatch(e)}function F(){return(F=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:(t=e.sent)&&(t.movies.forEach((function(e){e.isMinified=!0,H({type:"MOVIE_LOOKUP",movie:e,id:e.id})})),t.tv.forEach((function(e){e.isMinified=!0,H({type:"SERIES_LOOKUP",series:e,id:e.id})})),H({type:"POPULAR",popular:{movies:t.movies,tv:t.tv,people:t.people}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(g.a)(E.a.mark((function e(t){var a,r,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.next=3,P(t,a);case 3:(r=e.sent).isMinified=a,H({type:"MOVIE_LOOKUP",movie:r,id:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(g.a)(E.a.mark((function e(t){var a,r,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.next=3,L(t,a);case 3:if((r=e.sent).id){e.next=6;break}return e.abrupt("return",!1);case 6:r.isMinified=a,H({type:"SERIES_LOOKUP",series:r,id:t});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(g.a)(E.a.mark((function e(t){var a,r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:a=e.sent,r=a.movies,n=a.tv,H({type:"PERSON_LOOKUP",person:a.info,id:t}),0===r.length?H({type:"STORE_ACTOR_MOVIE",cast:{},crew:{},id:t}):H({type:"STORE_ACTOR_MOVIE",cast:r.cast,crew:r.crew,id:t}),0===n.length?H({type:"STORE_ACTOR_SERIES",cast:{},crew:{},id:t}):H({type:"STORE_ACTOR_SERIES",cast:n.cast,crew:n.crew,id:t});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return a=e.sent,e.abrupt("return",new Promise((function(e,t){a||t(),a.movies.forEach((function(e){e.isMinified=!0,H({type:"MOVIE_LOOKUP",movie:e,id:e.id})})),a.shows.forEach((function(e){e.isMinified=!0,H({type:"SERIES_LOOKUP",series:e,id:e.id})})),H({type:"SEARCH",movies:a.movies,series:a.shows,people:a.people}),e()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(g.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){T(t,a).then((function(t){e(t)})).catch((function(e){console.log(e),r("Error getting plex movies")}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G={getPopular:function(){return F.apply(this,arguments)},movie:function(e){return B.apply(this,arguments)},series:function(e){return U.apply(this,arguments)},search:function(e){return W.apply(this,arguments)},clearSearch:function(){H({type:"SEARCH",movies:[],series:[],people:[]})},person:function(e){return Y.apply(this,arguments)},top:function(e){return new Promise((function(t,a){(function(e){var t="".concat(_().api,"/top/shows");return"movie"===e&&(t="".concat(_().api,"/top/movies")),V(t).then((function(e){return e.json()}))})(e).then((function(e){var a=Object.values(e).sort((function(e,t){return e.globalViewCount-t.globalViewCount})).reverse();t(a)})).catch((function(e){console.log(e),a("Error getting plex movies")}))}))},history:function(e,t){return K.apply(this,arguments)},get_plex_media:function(e,t){return new Promise((function(a,r){(function(e,t){return V("".concat(_().api,"/plex/lookup/").concat(t,"/").concat(e)).then((function(e){return e.json()}))})(e,t).then((function(e){a(e)})).catch((function(e){r(e)}))}))}};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var X=s.a.createElement("path",{d:"M351.883,407.883C315.613,433.168 271.525,448 224,448C100.371,448 0,347.629 0,224C0,100.371 100.371,0 224,0C347.629,0 448,100.371 448,224C448,271.525 433.168,315.613 407.883,351.883L560,504L504,560L351.883,407.883ZM56,224C56,316.722 131.278,392 224,392C316.722,392 392,316.722 392,224C392,131.278 316.722,56 224,56C131.278,56 56,131.278 56,224Z"}),Z=function(e){var t=e.svgRef,a=e.title,r=Q(e,["svgRef","title"]);return s.a.createElement("svg",J({viewBox:"0 0 560 560",strokeMiterlimit:1.414,strokeLinejoin:"round",id:"plex-icon-search-560","aria-hidden":"true",className:"PlexIcon-plexIcon-8Tamaj QuickSearchInput-searchIcon-38PAh5",ref:t},r),a?s.a.createElement("title",null,a):null,X)},$=s.a.forwardRef((function(e,t){return s.a.createElement(Z,J({svgRef:t},e))}));a.p;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ae=s.a.createElement("path",{d:"M560 40c0-11.038-8.962-20-20-20H20C8.962 20 0 28.962 0 40v480c0 11.038 8.962 20 20 20h520c11.038 0 20-8.962 20-20V40zM100 468v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm400 0v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zM400 310v180c0 5.52-4.48 10-10 10H170c-5.52 0-10-4.48-10-10V310c0-5.52 4.48-10 10-10h220c5.52 0 10 4.48 10 10zm100 78v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm-400 0v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm0-80v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm400 0v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zM400 70v180c0 5.52-4.48 10-10 10H170c-5.52 0-10-4.48-10-10V70c0-5.52 4.48-10 10-10h220c5.52 0 10 4.48 10 10zm100 158v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm-400 0v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm0-80v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm400 0v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8v-24c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm0-80v24c0 4.415-3.585 8-8 8h-24c-4.415 0-8-3.585-8-8V68c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8zm-400 0v24c0 4.415-3.585 8-8 8H68c-4.415 0-8-3.585-8-8V68c0-4.415 3.585-8 8-8h24c4.415 0 8 3.585 8 8z"}),re=function(e){var t=e.svgRef,a=e.title,r=te(e,["svgRef","title"]);return s.a.createElement("svg",ee({viewBox:"0 0 560 560",id:"plex-icon-sidebar-movies-560","aria-hidden":"true",className:"PlexIcon-plexIcon-8Tamaj",ref:t},r),a?s.a.createElement("title",null,a):null,ae)},ne=s.a.forwardRef((function(e,t){return s.a.createElement(re,ee({svgRef:t},e))}));a.p;function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ce=s.a.createElement("path",{d:"M440 480c0-11.038-8.962-20-20-20H140c-11.038 0-20 8.962-20 20v20c0 11.038 8.962 20 20 20h280c11.038 0 20-8.962 20-20v-20zM540 40H20C8.962 40 0 48.962 0 60v360c0 11.038 8.962 20 20 20h520c11.038 0 20-8.962 20-20V60c0-11.038-8.962-20-20-20zm-40 70v220c0 5.52-4.48 10-10 10H70c-5.52 0-10-4.48-10-10V110c0-5.52 4.48-10 10-10h420c5.52 0 10 4.48 10 10z"}),ie=function(e){var t=e.svgRef,a=e.title,r=le(e,["svgRef","title"]);return s.a.createElement("svg",se({viewBox:"0 0 560 560",id:"plex-icon-sidebar-shows-560","aria-hidden":"true",className:"PlexIcon-plexIcon-8Tamaj",ref:t},r),a?s.a.createElement("title",null,a):null,ce)},oe=s.a.forwardRef((function(e,t){return s.a.createElement(ie,se({svgRef:t},e))}));a.p;function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var pe=s.a.createElement("path",{fill:"currentColor",d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}),de=function(e){var t=e.svgRef,a=e.title,r=me(e,["svgRef","title"]);return s.a.createElement("svg",ue({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"users",className:"svg-inline--fa fa-users fa-w-20",role:"img",viewBox:"0 0 640 512",ref:t},r),a?s.a.createElement("title",null,a):null,pe)},ve=s.a.forwardRef((function(e,t){return s.a.createElement(de,ue({svgRef:t},e))}));a.p;function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var fe=s.a.createElement("path",{fill:"currentColor",d:"M336 0H48C21.49 0 0 21.49 0 48v464l192-112 192 112V48c0-26.51-21.49-48-48-48zm0 428.43l-144-84-144 84V54a6 6 0 0 1 6-6h276c3.314 0 6 2.683 6 5.996V428.43z"}),Ee=function(e){var t=e.svgRef,a=e.title,r=be(e,["svgRef","title"]);return s.a.createElement("svg",he({"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"bookmark",className:"svg-inline--fa fa-bookmark fa-w-12",role:"img",viewBox:"0 0 384 512",ref:t},r),a?s.a.createElement("title",null,a):null,fe)},ge=s.a.forwardRef((function(e,t){return s.a.createElement(Ee,he({svgRef:t},e))}));a.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var we=s.a.createElement("path",{fill:"currentColor",d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"}),Ne=function(e){var t=e.svgRef,a=e.title,r=Oe(e,["svgRef","title"]);return s.a.createElement("svg",ye({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"tools",className:"svg-inline--fa fa-tools fa-w-16",role:"img",viewBox:"0 0 512 512",ref:t},r),a?s.a.createElement("title",null,a):null,we)},je=s.a.forwardRef((function(e,t){return s.a.createElement(Ne,ye({svgRef:t},e))})),ke=(a.p,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.location.pathname,t=this.props.user.current;return s.a.createElement("div",{className:"sidebar--inner"},s.a.createElement(v.b,{to:"/",className:"logo"},s.a.createElement("p",{className:"logo-text",title:"Petio"},"Pet",s.a.createElement("span",null,"io"))),s.a.createElement("div",{className:"sidebar--scroll"},s.a.createElement(v.b,{to:"/user",className:"sidebar--item user-profile "+("/user"===e||e.startsWith("/user/")?"active":"")},s.a.createElement("p",null,t.title),s.a.createElement("div",{className:"icon"},s.a.createElement("div",{className:"thumb",style:{backgroundImage:"url("+t.thumb+")",color:"red"}}))),s.a.createElement(v.b,{to:"/",className:"sidebar--item "+("/"===e||e.startsWith("/search/")?"active":"")},s.a.createElement("p",null,"Search"),s.a.createElement("div",{className:"icon"},s.a.createElement($,null))),s.a.createElement(v.b,{to:"/movies",className:"sidebar--item "+("/movies"===e||e.startsWith("/movie/")?"active":"")},s.a.createElement("p",null,"Movies"),s.a.createElement("div",{className:"icon"},s.a.createElement(ne,null))),s.a.createElement(v.b,{to:"/tv",className:"sidebar--item "+("/tv"===e||e.startsWith("/series/")?"active":"")},s.a.createElement("p",null,"TV Shows"),s.a.createElement("div",{className:"icon"},s.a.createElement(oe,null))),s.a.createElement(v.b,{to:"/people",className:"sidebar--item "+("/people"===e||e.startsWith("/person/")?"active":"")},s.a.createElement("p",null,"People"),s.a.createElement("div",{className:"icon"},s.a.createElement(ve,null))),s.a.createElement(v.b,{to:"/requests",className:"sidebar--item "+("/requests"===e||e.startsWith("/requests/")?"active":"")},s.a.createElement("p",null,"Requests"),s.a.createElement("div",{className:"icon"},s.a.createElement(ge,null))),t.is_admin?s.a.createElement(v.b,{to:"/admin",className:"sidebar--item "+("/admin"===e||e.startsWith("/admin/")?"active":"")},s.a.createElement("p",null,"Admin"),s.a.createElement("div",{className:"icon"},s.a.createElement(je,null))):null))}}]),a}(s.a.Component));ke=Object(h.f)(ke);var _e=Object(b.b)((function(e){return{mediabutler:e.mediabutler,user:e.user}}))((function(e){return s.a.createElement(ke,{mediabutler:e.mediabutler,user:e.user})}));function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var xe=s.a.createElement("path",{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"}),qe=function(e){var t=e.svgRef,a=e.title,r=Re(e,["svgRef","title"]);return s.a.createElement("svg",Se({viewBox:"0 0 512 512",ref:t},r),a?s.a.createElement("title",null,a):null,xe)},Ce=s.a.forwardRef((function(e,t){return s.a.createElement(qe,Se({svgRef:t},e))})),Ie=(a.p,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={display:!1,selectedServer:!1,configReady:!1},r.selectServer=r.selectServer.bind(Object(m.a)(r)),r.saveConfig=r.saveConfig.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({display:!0})}),500)}},{key:"selectServer",value:function(e){var t=e.currentTarget.dataset.id;this.setState({selectedServer:t})}},{key:"saveConfig",value:function(){var e=this;this.state.selectedServer&&G.saveConfig(this.state.selectedServer).then((function(){e.setState({configReady:!0})}))}},{key:"render",value:function(){var e=this,t=s.a.createElement("p",null,"Your config file should have auto downloaded, place this config file in the root of your Petio install and then refresh the page."),a=s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Choose your server from the options below. This will lock this install of Petio to a specific server running Mediabutler. Servers not running Mediabutler will be greyed out."),s.a.createElement("h3",{className:"sub-title"},"Servers"),s.a.createElement("div",{className:"server-list"},this.props.mediabutler.servers.map((function(t){return s.a.createElement("div",{className:"server-list--item",key:t.machineId},s.a.createElement("div",{className:"server-list--item-inner ".concat(t.url?"":"disabled"," ").concat(e.state.selectedServer===t.machineId?"active":""),"data-id":t.machineId,onClick:e.selectServer},s.a.createElement("div",{className:"icon"},s.a.createElement(Ce,null)),t.name))}))));return s.a.createElement("div",{className:"config-setup ".concat(this.state.display?"loaded":"")},s.a.createElement("div",{className:"config-setup--inner"},s.a.createElement("h1",{className:"main-title"},"Config Setup"),this.state.configReady?t:a,this.state.selectedServer&&!this.state.configReady?s.a.createElement("button",{className:"btn",onClick:this.saveConfig},"Submit"):null))}}]),a}(s.a.Component));var Me=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(Ie,{mediabutler:e.mediabutler})})),Te=a(13),Pe=(a(21),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onServer:!1,imdbId:!1,tmdbId:!1},r.getMovie=r.getMovie.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getMovie()}},{key:"getMovie",value:function(){var e=this.props.movie.id;if(!this.props.mediabutler.movie_lookup[e]){if(!e)return!1;G.movie(e,!0)}}},{key:"render",value:function(){var e=this.props.movie.id,t=this.props.mediabutler.movie_lookup[e];if(!e||"false"===e)return null;if(!t)return s.a.createElement("div",{key:e,"data-key":e,className:"card type--movie-tv "},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/movie/".concat(e),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},s.a.createElement("div",{className:"no-poster"})),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},"Loading...",s.a.createElement("span",{className:"year"})))));var a=t.poster_path?s.a.createElement(Te.LazyLoadImage,{alt:t.title,src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path)}):s.a.createElement("div",{className:"no-poster"});return s.a.createElement("div",{key:t.id,"data-key":t.id,className:"card type--movie-tv "+(t.on_server?"on-server":"")},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/movie/".concat(t.id),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},a),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title",title:t.title},t.title,s.a.createElement("span",{className:"year"},this.props.character?this.props.character:t.release_date?"("+new Date(t.release_date).getFullYear()+")":null)))))}}]),a}(s.a.Component));Pe=Object(h.f)(Pe);var Le=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(Pe,{mediabutler:e.mediabutler,movie:e.movie,character:e.character})})),De=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onServer:!1,imdbId:!1,tmdbId:!1},r.getMovie=r.getSeries.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getSeries()}},{key:"getSeries",value:function(){var e=this.props.series.id;if(!this.props.mediabutler.series_lookup[e]){if(!e)return!1;G.series(e,!0)}}},{key:"render",value:function(){var e=this.props.series.id;if(!e||"false"===e)return null;var t=this.props.mediabutler.series_lookup[e];if(!t)return s.a.createElement("div",{key:e,"data-key":e,className:"card type--movie-tv "},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/series/".concat(e),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},s.a.createElement("div",{className:"no-poster"})),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},"Loading...",s.a.createElement("span",{className:"year"})))));var a=t.poster_path?s.a.createElement(Te.LazyLoadImage,{alt:t.title,src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path)}):s.a.createElement("div",{className:"no-poster"});return s.a.createElement("div",{key:t.id,"data-key":t.id,className:"card type--movie-tv "+(t.on_server?"on-server":"")},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/series/".concat(t.id),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},a),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},t.name,s.a.createElement("span",{className:"year"},this.props.character?this.props.character:"("+new Date(t.first_air_date).getFullYear()+")")))))}}]),a}(s.a.Component);De=Object(h.f)(De);var ze=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(De,{mediabutler:e.mediabutler,series:e.series,character:e.character})})),Ae=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"carousel"},s.a.createElement("div",{className:"carousel--inner"},this.props.children))}}]),a}(s.a.Component),Ve=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.person;return e?(e.known_for&&e.known_for.map((function(e,t){return s.a.createElement(v.b,{to:"/movie/".concat(e.id)},e.title)})),s.a.createElement("div",{key:e.id,className:"card person-card"},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/person/".concat(e.id),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},e.profile_path?s.a.createElement(Te.LazyLoadImage,{alt:e.name,src:"https://image.tmdb.org/t/p/w200/".concat(e.profile_path)}):s.a.createElement("div",{className:"no-poster"})),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},e.name),null,this.props.character?s.a.createElement("p",{className:"character"},this.props.character):null)))):null}}]),a}(s.a.Component),He=Object(h.f)(Ve),Fe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"carousel-loading"},s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-1"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-2"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-3"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-4"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-5"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-6"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))))}}]),a}(s.a.Component),Be=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"carousel-loading carousel-loading-person"},s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-1"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-2"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-3"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-4"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-5"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))),s.a.createElement("div",{className:"carousel-loading-item carousel-loading-item-6"},s.a.createElement("div",{className:"carousel-loading-item--inner"}),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},s.a.createElement("span",{className:"year"})))))}}]),a}(s.a.Component),Ue=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={searchTerm:"",searchActive:!1,isLoading:!1},r.handleChange=r.handleChange.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=this;if(e.currentTarget.value.length>2){var a=e.currentTarget.value;this.setState({isLoading:!0}),setTimeout((function(){a===t.state.searchTerm&&(t.setState({isLoading:!0}),G.search(a).then((function(){t.setState({isLoading:!1})})).catch((function(){t.setState({isLoading:!1})})))}),500),this.setState({searchTerm:e.currentTarget.value,searchActive:!0})}else G.clearSearch(),this.setState({searchTerm:e.currentTarget.value,searchActive:!1,isLoading:!1})}},{key:"componentDidMount",value:function(){G.getPopular(),document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0)}},{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Movies"),this.props.mediabutler.search_results.movies.length>0?s.a.createElement(Ae,null,this.props.mediabutler.search_results.movies.map((function(e){return s.a.createElement(Le,{key:e.id,movie:e})}))):this.state.isLoading?s.a.createElement(Fe,null):s.a.createElement("p",null,"No results")),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Shows"),this.props.mediabutler.search_results.series.length>0?s.a.createElement(Ae,null,this.props.mediabutler.search_results.series.map((function(e){return s.a.createElement(ze,{key:e.id,series:e})}))):this.state.isLoading?s.a.createElement(Fe,null):s.a.createElement("p",null,"No results")),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"People"),this.props.mediabutler.search_results.people.length>0?s.a.createElement(Ae,null,this.props.mediabutler.search_results.people.map((function(e){return s.a.createElement(He,{key:e.id,person:e})}))):this.state.isLoading?s.a.createElement(Be,null):s.a.createElement("p",null,"No results"))),t=s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Trending Movies"),Object.keys(this.props.mediabutler.popular).length>0?s.a.createElement(Ae,null,Object.keys(this.props.mediabutler.popular).length>0?this.props.mediabutler.popular.movies.map((function(e){return s.a.createElement(Le,{key:e.id,movie:e})})):null):s.a.createElement(Fe,null)),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Trending Shows"),Object.keys(this.props.mediabutler.popular).length>0?s.a.createElement(Ae,null,Object.keys(this.props.mediabutler.popular).length>0?this.props.mediabutler.popular.tv.map((function(e){return s.a.createElement(ze,{key:e.id,series:e})})):null):s.a.createElement(Fe,null)),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Trending People"),s.a.createElement(Ae,null,Object.keys(this.props.mediabutler.popular).length>0?this.props.mediabutler.popular.people.map((function(e){return s.a.createElement(He,{key:e.id,person:e})})):null)));return s.a.createElement("div",{className:"search-wrap"},s.a.createElement("section",null,s.a.createElement("h1",{className:"main-title mb--1"},"Search"),s.a.createElement("div",{className:"search-form"},s.a.createElement("input",{type:"text",placeholder:"Search",value:this.state.searchTerm,onChange:this.handleChange}),s.a.createElement("button",{className:"search-btn"},s.a.createElement($,null)))),this.state.searchActive?e:t)}}]),a}(s.a.Component);Ue=Object(h.f)(Ue);var Ye=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(Ue,{mediabutler:e.mediabutler})}));function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ke(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ge=s.a.createElement("path",{d:"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"}),Je=function(e){var t=e.svgRef,a=e.title,r=Ke(e,["svgRef","title"]);return s.a.createElement("svg",We({viewBox:"0 0 512 512",ref:t},r),a?s.a.createElement("title",null,a):null,Ge)},Qe=s.a.forwardRef((function(e,t){return s.a.createElement(Je,We({svgRef:t},e))}));a.p;function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ze(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var $e=s.a.createElement("path",{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"}),et=function(e){var t=e.svgRef,a=e.title,r=Ze(e,["svgRef","title"]);return s.a.createElement("svg",Xe({viewBox:"0 0 512 512",ref:t},r),a?s.a.createElement("title",null,a):null,$e)},tt=s.a.forwardRef((function(e,t){return s.a.createElement(et,Xe({svgRef:t},e))}));a.p;function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function rt(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var nt=s.a.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}),st=function(e){var t=e.svgRef,a=e.title,r=rt(e,["svgRef","title"]);return s.a.createElement("svg",at({viewBox:"0 0 448 512",ref:t},r),a?s.a.createElement("title",null,a):null,nt)},lt=s.a.forwardRef((function(e,t){return s.a.createElement(st,at({svgRef:t},e))}));a.p;function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function it(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ot=s.a.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}),ut=function(e){var t=e.svgRef,a=e.title,r=it(e,["svgRef","title"]);return s.a.createElement("svg",ct({viewBox:"0 0 512 512",ref:t},r),a?s.a.createElement("title",null,a):null,ot)},mt=s.a.forwardRef((function(e,t){return s.a.createElement(ut,ct({svgRef:t},e))}));a.p;function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function dt(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var vt=s.a.createElement("path",{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}),ht=function(e){var t=e.svgRef,a=e.title,r=dt(e,["svgRef","title"]);return s.a.createElement("svg",pt({viewBox:"0 0 576 512",ref:t},r),a?s.a.createElement("title",null,a):null,vt)},bt=s.a.forwardRef((function(e,t){return s.a.createElement(ht,pt({svgRef:t},e))}));a.p;function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Et(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var gt=s.a.createElement("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"}),yt=function(e){var t=e.svgRef,a=e.title,r=Et(e,["svgRef","title"]);return s.a.createElement("svg",ft({viewBox:"0 0 576 512",ref:t},r),a?s.a.createElement("title",null,a):null,gt)},Ot=s.a.forwardRef((function(e,t){return s.a.createElement(yt,ft({svgRef:t},e))}));a.p;a.p;var wt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={id:r.props.id,user:r.props.user,rating:0},r.setRating=r.setRating.bind(Object(m.a)(r)),r.saveReview=r.saveReview.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"setRating",value:function(e){this.setState({rating:e.currentTarget.dataset.rating})}},{key:"saveReview",value:function(){var e=this,t={score:this.state.rating,comment:""};C.review(this.props.item,this.props.user._id,t),setTimeout((function(){e.props.closeReview(),e.props.getReviews(),e.setState({rating:0})}),1e3)}},{key:"render",value:function(){for(var e=[],t=0;t<10;t++)e.push(s.a.createElement("div",{key:"star__".concat(t),className:"stars-1 star ".concat(this.state.rating>=t+1?"active":""),"data-rating":t+1,onClick:this.setRating},s.a.createElement(bt,null)));return s.a.createElement("div",{className:"review--wrap ".concat(this.props.active?"active":"")},s.a.createElement("div",{className:"review--inner"},s.a.createElement("div",{className:"review--top"},s.a.createElement("h3",null,"What did you think?")),s.a.createElement("div",{className:"review--main"},s.a.createElement("p",null,"Let other users know what you thought. Please note the review is not related to quality or issues, for issues please report an issue."),s.a.createElement("div",{className:"stars-wrap"},e),s.a.createElement("div",{className:"btn btn__square bad close-review",onClick:this.props.closeReview},"Cancel"),s.a.createElement("div",{className:"btn btn__square save-review",onClick:this.saveReview},"Save"))))}}]),a}(s.a.Component),Nt=a(34),jt=a.n(Nt),kt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"reviews-list--wrap"},this.props.reviews&&this.props.reviews.length>0?this.props.reviews.map((function(e){for(var t=[],a=0;a<10;a++)t.push(s.a.createElement("div",{key:"".concat(e._id,"__").concat(a),className:"stars-1 star ".concat(e.score>a?"active":"")},s.a.createElement(bt,null)));var r="".concat(_().api,"/user/thumb/").concat(e.user);return s.a.createElement("div",{className:"reviews-list--item",key:e._id},s.a.createElement("div",{className:"reviews-list--thumb"},s.a.createElement("div",{className:"thumb",style:{backgroundImage:"url("+r+")"}})),s.a.createElement("div",{className:"reviews-list--content"},s.a.createElement("p",null,jt()(e.date,"dddd, mmmm dS, yyyy, h:MMtt")),s.a.createElement("div",{className:"stars-wrap"},t),s.a.createElement("p",null,e.comment)))})):s.a.createElement("p",null,"No reviews"))}}]),a}(s.a.Component),_t=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"movie-wrap"},s.a.createElement("div",{className:"movie-top"},s.a.createElement("div",{className:"movie-backdrop"},s.a.createElement("div",{className:"no-backdrop"})),s.a.createElement("div",{className:"movie-poster"},s.a.createElement("div",{className:"movie-poster--inner"})),s.a.createElement("div",{className:"movie-details"},s.a.createElement("span",null),s.a.createElement("div",{className:"movie-details--top"},s.a.createElement("div",{className:"movie-logo placeholder"})),s.a.createElement("div",{className:"movie--actions"},s.a.createElement("div",{className:"btn btn__square placeholder"}),s.a.createElement("div",{className:"btn btn__square placeholder"})))),s.a.createElement("div",{className:"movie-content"},s.a.createElement("section",null,s.a.createElement("div",{className:"quick-view"},s.a.createElement("div",{className:"side-content"},s.a.createElement("div",{className:"movie-action"},s.a.createElement("div",{className:"btn btn__square placeholder"}),s.a.createElement("div",{className:"btn btn__square placeholder"}))),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"details text-placeholder"}),s.a.createElement("div",{className:"movie-action__mobile"},s.a.createElement("div",{className:"btn btn__square placeholder"}),s.a.createElement("div",{className:"btn btn__square placeholder"})),s.a.createElement("div",{className:"movie-crew"},s.a.createElement("div",{className:"movie-crew--item text-placeholder"}),s.a.createElement("div",{className:"movie-crew--item text-placeholder"})),s.a.createElement("div",{className:"sub-title mb--1 text-placeholder"}),s.a.createElement("div",{className:"overview text-placeholder"})))),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1 text-placeholder"}),s.a.createElement(Be,null)),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1 text-placeholder"}),s.a.createElement(Fe,null))))}}]),a}(s.a.Component),St=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onServer:!1,id:r.props.match.params.id,requested:!1,related:!1,trailer:!1,reviewOpen:!1},r.getSeries=r.getSeries.bind(Object(m.a)(r)),r.request=r.request.bind(Object(m.a)(r)),r.getRequests=r.getRequests.bind(Object(m.a)(r)),r.init=r.init.bind(Object(m.a)(r)),r.showTrailer=r.showTrailer.bind(Object(m.a)(r)),r.openReview=r.openReview.bind(Object(m.a)(r)),r.closeReview=r.closeReview.bind(Object(m.a)(r)),r.getReviews=r.getReviews.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){this.getRequests(),this.props.match.params.id!==this.state.id&&(this.setState({onServer:!1,id:this.props.match.params.id,requested:!1,related:!1}),this.init())}},{key:"init",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0);var e=this.props.match.params.id;this.getSeries(e),this.getRequests(),this.getReviews()}},{key:"componentDidMount",value:function(){this.init()}},{key:"getRequests",value:function(){var e=this.props.match.params.id,t=this.props.user.requests;if(t)if(t[e]){var a=Object.keys(t[e].users).length;this.props.user.requests[e]&&a!==this.state.requested?this.setState({requested:a}):!t[e]&&this.state.requested&&this.setState({requested:!1})}else this.state.requested&&this.setState({requested:!1})}},{key:"request",value:function(){var e=this.props.match.params.id,t=this.props.mediabutler.series_lookup[e],a={id:t.id,tmdb_id:t.id,tvdb_id:t.tvdb_id,imdb_id:t.imdb_id,title:t.name,type:"tv",thumb:t.poster_path};C.request(a,this.props.user.current).then((function(){C.getRequests()}))}},{key:"getReviews",value:function(){var e=this.props.match.params.id;C.getReviews(e)}},{key:"getSeries",value:function(){var e=this.props.match.params.id;this.props.mediabutler.series_lookup[e]?this.props.mediabutler.series_lookup[e].isMinified&&G.series(e):G.series(e)}},{key:"timeConvert",value:function(e){var t=e/60,a=Math.floor(t),r=60*(t-a),n=Math.round(r),s=a<1?"":1===a?"hr":a>1?"hrs":"";return"".concat(a>=1?a:""," ").concat(s," ").concat(n," mins")}},{key:"findNested",value:function(e,t,a){if(e[t]===a)return e;for(var r=0,n=Object.keys(e).length;r<n;r++)if("object"==typeof e[r]){var s=this.findNested(e[r],t,a);if(s)return s}}},{key:"openReview",value:function(){this.setState({reviewOpen:!0})}},{key:"closeReview",value:function(){this.setState({reviewOpen:!1})}},{key:"showTrailer",value:function(){this.setState({trailer:!this.state.trailer})}},{key:"render",value:function(){var e=this,t=this.state.id,a=this.props.mediabutler.series_lookup[t];if(!a)return s.a.createElement(_t,null);if(a.isMinified)return s.a.createElement(_t,null);var r=null,n=null;a.recommendations&&(n=a.recommendations.map((function(e){return s.a.createElement("div",{className:"related--item",key:"related-".concat(e)},s.a.createElement(ze,{series:{id:e}}))})),r=s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Related Shows"),s.a.createElement(Ae,null,n)));var l=a.on_server?s.a.createElement("div",{className:"btn btn__square good"},s.a.createElement(mt,null),"On Plex"):this.state.requested?s.a.createElement("button",{className:"btn btn__square blue",onClick:this.request},"Requested by ".concat(this.state.requested," \n\t\t\t\t").concat(this.state.requested>1?"users":"user")):s.a.createElement("button",{className:"btn btn__square",onClick:this.request},s.a.createElement(Qe,null),"Request"),c=this.state.onServer?s.a.createElement("button",{className:"btn btn__square good"},s.a.createElement(lt,null),"Play"):null,i=s.a.createElement("button",{className:"btn btn__square",onClick:this.props.openIssues},s.a.createElement(tt,null),"Report an issue"),o=null;if(this.props.user.reviews&&this.props.user.reviews[this.props.match.params.id]){for(var u=!1,m=0;m<this.props.user.reviews[this.props.match.params.id].length;m++)if(this.props.user.reviews[this.props.match.params.id][m].user==this.props.user.current._id){u=this.props.user.reviews[this.props.match.params.id][m];break}o=s.a.createElement("button",{className:"btn btn__square",onClick:this.openReview},u?s.a.createElement(s.a.Fragment,null,s.a.createElement(bt,null),"Reviewed ",u.score/10*100,"%"):s.a.createElement(s.a.Fragment,null,s.a.createElement(bt,null),"Review"))}var p=a.seasons,d=a.vote_average,h=!!a.videos.results&&a.videos.results[0];h&&"YouTube"!==h.site&&(h=!1);var b="Not Reviewed",f=0;if(this.props.user.reviews&&this.props.user.reviews[this.props.match.params.id]&&Object.keys(this.props.user.reviews[this.props.match.params.id]).length){var E=0;Object.keys(this.props.user.reviews[this.props.match.params.id]).map((function(t){E+=e.props.user.reviews[e.props.match.params.id][t].score/10*100})),b="".concat((E/Object.keys(this.props.user.reviews[this.props.match.params.id]).length).toFixed(0),"% (").concat(Object.keys(this.props.user.reviews[this.props.match.params.id]).length," reviews)"),f=E/Object.keys(this.props.user.reviews[this.props.match.params.id]).length}return s.a.createElement("div",{className:"series-wrap","data-id":a.imdb_id,key:"".concat(a.title,"__wrap")},s.a.createElement(wt,{id:this.props.match.params.id,user:this.props.user.current,active:this.state.reviewOpen,closeReview:this.closeReview,getReviews:this.getReviews,item:a}),s.a.createElement("div",{className:"series-top ".concat(this.state.trailer?"show-trailer":"")},s.a.createElement("div",{className:"series-backdrop",key:"".concat(a.title,"__backdrop")},h&&this.state.trailer?s.a.createElement("div",{className:"series-trailer"},s.a.createElement("iframe",{frameBorder:"0",height:"100%",width:"100%",src:"https://youtube.com/embed/".concat(h.key,"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&modestbranding=1&playsinline=1&playlist=").concat(h.key)})):null,a.backdrop_path?s.a.createElement(Te.LazyLoadImage,{src:"https://image.tmdb.org/t/p/w1280/"+a.backdrop_path}):s.a.createElement("div",{className:"no-backdrop",style:{backgroundImage:"url(/p-seamless.png)"}})),s.a.createElement("div",{className:"series-poster",key:"".concat(a.title,"__poster")},s.a.createElement("div",{className:"series-poster--inner"},a.poster_path?s.a.createElement(Te.LazyLoadImage,{src:"https://image.tmdb.org/t/p/w500/"+a.poster_path}):null)),s.a.createElement("div",{className:"series-details"},s.a.createElement("span",null),s.a.createElement("div",{className:"series-details--top"},a.logo?s.a.createElement(Te.LazyLoadImage,{className:"series-logo",src:a.logo}):s.a.createElement("h1",{className:"single-title"},a.original_name)),s.a.createElement("div",{className:"series--actions"},c,l,i))),s.a.createElement("div",{className:"series-content"},s.a.createElement("section",null,s.a.createElement("div",{className:"quick-view"},s.a.createElement("div",{className:"side-content"},s.a.createElement("div",{className:"series-action"},s.a.createElement("button",{onClick:this.showTrailer,className:"btn btn__square"},s.a.createElement(Ot,null),"Trailer"),o)),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"details"},s.a.createElement("p",{className:"year"},new Date(a.first_air_date).getFullYear()+" - "+new Date(a.last_air_date).getFullYear()),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",{className:"network"},a.networks[0]?a.networks[0].name:""),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",{className:"genre"},a.genres.map((function(e,t){return t===a.genres.length-1?e.name:e.name+" / "}))),s.a.createElement("p",{className:"spacer hide-mb"},"|"),s.a.createElement("p",null,"Rating:"," ",s.a.createElement("span",{className:"color-".concat(d>7.9?"green":d>6.9?"blue":d>4.9?"orange":"red")},d)),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",null,"User Rating:"," ",s.a.createElement("span",{className:"color-".concat(f>79?"green":f>69?"blue":f>49?"orange":"red")},b))),s.a.createElement("div",{className:"series-action__mobile"},c,l,i,o),s.a.createElement("div",{className:"series-crew"},a.created_by[0]?s.a.createElement("div",{className:"series-crew--item"},s.a.createElement("p",{className:"sub-title"},"Created by"),s.a.createElement(v.b,{to:"/person/".concat(a.created_by[0].id),className:"crew-credit"},a.created_by[0].name)):null,a.created_by[1]?s.a.createElement("div",{className:"series-crew--item"},s.a.createElement("p",{className:"sub-title"},"Created By"),s.a.createElement(v.b,{to:"/person/".concat(a.created_by[1].id),className:"crew-credit"},a.created_by[1].name)):null),s.a.createElement("p",{className:"sub-title mb--1"},"Synopsis"),s.a.createElement("p",{className:"overview"},a.overview)))),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Seasons"),s.a.createElement(Ae,null,p.map((function(e){return s.a.createElement("div",{className:"card type--movie-tv",key:"season--".concat(e.season_number).concat(t)},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/series/".concat(t,"/season/").concat(e.season_number),className:"full-link"}),s.a.createElement("div",{className:"image-wrap"},e.poster_path?s.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200/".concat(e.poster_path),alt:e.name}):a.poster_path?s.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/".concat(a.poster_path),alt:e.name}):null),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title"},e.name,s.a.createElement("span",{className:"year"},e.air_date?"("+new Date(e.air_date).getFullYear()+")":"")))))})))),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Cast"),s.a.createElement(Ae,null,a.credits.cast.map((function(e,t){return s.a.createElement(He,{key:"".concat(e.name,"--").concat(e.character),person:e,character:e.character})})))),r,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Reviews"),this.props.user.reviews?s.a.createElement(kt,{reviews:this.props.user.reviews[t]}):null)))}}]),a}(s.a.Component);St=Object(h.f)(St);var Rt=Object(b.b)((function(e){return{mediabutler:e.mediabutler,user:e.user}}))((function(e){return s.a.createElement(St,{mediabutler:e.mediabutler,user:e.user,openIssues:e.openIssues})})),xt=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onServer:!1,show:r.props.match.params.id,season:r.props.match.params.season,requested:!1},r.daysTillAir=r.daysTillAir.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0);var e=this.props.match.params.id;this.props.match.params.season;this.props.mediabutler.series_lookup[e]?this.props.mediabutler.series_lookup[e].isMinified&&G.series(e):G.series(e)}},{key:"daysTillAir",value:function(e){var t=new Date,a=new Date(e),r=Math.round(Math.abs((a.setHours(0,0,0,0)-t.setHours(0,0,0,0))/864e5));return a<t?"Has aired on tv":r<100?"airs in "+r+" "+(r>1?"days":"day"):"Not yet aired"}},{key:"render",value:function(){var e=this,t=this.props.match.params.id,a=this.props.match.params.season,r=this.props.mediabutler.series_lookup[t],n=!!this.props.mediabutler.series_lookup[t]&&this.props.mediabutler.series_lookup[t].seasonData[a];console.log(n);var l=new Date;return l.setHours(0,0,0,0),r&&n?r.isMinified?s.a.createElement("p",null,"Loading..."):s.a.createElement("div",{className:"page-wrap season-wrap",style:{backgroundImage:"url(https://image.tmdb.org/t/p/original/"+r.backdrop_path+")"}},s.a.createElement("div",{className:"season-inner"},s.a.createElement("div",{className:"season-details"},s.a.createElement("div",{className:"stick"},s.a.createElement("div",null,s.a.createElement(v.b,{to:"/series/".concat(t),className:"btn btn__square"},r.name)),r.logo?s.a.createElement("div",null,s.a.createElement("img",{class:"series-logo__small",src:r.logo})):null,s.a.createElement("h1",{className:"main-title"},n.name),s.a.createElement("p",{className:"overview"},n.overview))),s.a.createElement("div",{className:"season-episodes"},s.a.createElement("div",{className:"season-episodes-inner"},n.episodes.map((function(t){var a=!!t.air_date&&Date.parse(t.air_date);return s.a.createElement("div",{className:"season-episode "+(a<l?"aired":"not-aired")},s.a.createElement("div",{className:"season-episode--img"},s.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/".concat(t.still_path)})),s.a.createElement("div",{className:"season-episode--info"},s.a.createElement("p",{className:"upper small ep-num"},"Season"," ",t.season_number,": Episode"," ",t.episode_number," -"," ",e.daysTillAir(a)),s.a.createElement("h4",{className:"sub-title"},t.name),s.a.createElement("p",{className:"small detail"},t.overview)),s.a.createElement("div",{className:"season-episode--actions"},s.a.createElement("button",{className:"btn btn__square"},"Request"),s.a.createElement("button",{className:"btn btn__square"},"Report an issue")))})))))):s.a.createElement("div",{className:"page-wrap"},s.a.createElement("p",null,"Loading..."))}}]),a}(s.a.Component);xt=Object(h.f)(xt);var qt=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(xt,{mediabutler:e.mediabutler})}));function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function It(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Mt=s.a.createElement("path",{id:"_x34_9-HD_icon",d:"M278.743,33.612H11.519C5.157,33.612,0,38.77,0,45.131v200c0,6.361,5.157,11.519,11.519,11.519h267.225 c6.361,0,11.519-5.157,11.519-11.519v-200C290.262,38.77,285.104,33.612,278.743,33.612z M104.063,190.131l9.989-34.973H76.771 l-9.993,34.973H43.896l25.709-90h22.888L81.914,137.16h37.279l10.579-37.029h22.89l-25.715,90H104.063z M244.33,145.131 c-7.604,26.613-32.658,45-61.585,45h-37.796l16.986-59.461h22.882l-11.768,41.199h16.327c14.014,0,27.128-10.797,31.644-26.607 c4.555-15.945-2.865-26.871-17.393-26.871h-38.188l5.217-18.26h38.7C237.641,100.131,251.965,118.391,244.33,145.131z"}),Tt=s.a.createElement("g",null),Pt=s.a.createElement("g",null),Lt=s.a.createElement("g",null),Dt=s.a.createElement("g",null),zt=s.a.createElement("g",null),At=s.a.createElement("g",null),Vt=s.a.createElement("g",null),Ht=s.a.createElement("g",null),Ft=s.a.createElement("g",null),Bt=s.a.createElement("g",null),Ut=s.a.createElement("g",null),Yt=s.a.createElement("g",null),Wt=s.a.createElement("g",null),Kt=s.a.createElement("g",null),Gt=s.a.createElement("g",null),Jt=function(e){var t=e.svgRef,a=e.title,r=It(e,["svgRef","title"]);return s.a.createElement("svg",Ct({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 290.262 290.262",style:{enableBackground:"new 0 0 290.262 290.262"},xmlSpace:"preserve",ref:t},r),a?s.a.createElement("title",null,a):null,Mt,Tt,Pt,Lt,Dt,zt,At,Vt,Ht,Ft,Bt,Ut,Yt,Wt,Kt,Gt)},Qt=s.a.forwardRef((function(e,t){return s.a.createElement(Jt,Ct({svgRef:t},e))}));a.p;function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Zt(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var $t=s.a.createElement("g",{id:"_x34_2-_1080_Full_HD"},s.a.createElement("path",{d:"M278.743,29.29H11.519C5.157,29.29,0,34.447,0,40.809v128.645v11.355v68.645c0,6.361,5.157,11.519,11.519,11.519h267.225 c6.361,0,11.519-5.157,11.519-11.519v-68.645v-11.355V40.809C290.262,34.447,285.104,29.29,278.743,29.29z M56.563,185.959H33.751 v15.375H54.19v4.813H33.751v18.748h-4.996v-43.748h27.809V185.959z M99.69,206.895c0,11.375-6.875,18.252-18.313,18.252 c-11.5,0-18.436-6.877-18.436-18.252v-25.748h5v25.748c0,8.5,5.122,13.439,13.436,13.439c8.313,0,13.313-4.939,13.313-13.439 v-25.748h5V206.895z M136.13,224.895h-24.188v-43.748h5v39.002h19.188V224.895z M168.444,224.895h-24.187v-43.748h4.998v39.002 h19.189V224.895z M214.693,224.895h-11.126v-16.998h-18.121v16.998h-11.127v-43.748h11.127v18h18.121v-18h11.126V224.895z  M241.822,224.895h-18.376v-25.201h11.125v16.33h7.939c6.811,0,11.688-5.254,11.688-12.939c0-7.754-5.126-13.063-12.189-13.063 h-18.563v-8.875h18.813c13.75,0,23.248,8.875,23.248,21.873C265.507,215.957,255.882,224.895,241.822,224.895z M267.225,157.935 H23.037V52.327h244.188V157.935z"}),s.a.createElement("polygon",{points:"53.415,128.666 66.592,128.666 66.592,76.775 43.866,76.775 43.866,87.363 53.415,87.363  "}),s.a.createElement("path",{d:"M99.901,129.037c14.656,0,22.873-9.404,22.873-26.354c0-16.877-8.217-26.279-22.873-26.279 c-14.805,0-23.021,9.402-23.021,26.279C76.88,119.633,85.097,129.037,99.901,129.037z M99.901,86.029c6.514,0,9.4,4.813,9.4,16.654 s-2.887,16.729-9.4,16.729c-6.664,0-9.475-4.887-9.475-16.729S93.237,86.029,99.901,86.029z"}),s.a.createElement("path",{d:"M128.401,114.232c0,9.178,8.29,15.025,21.246,15.025c12.951,0,21.243-5.922,21.243-15.25 c0-5.771-3.552-10.732-9.253-13.102c4.072-2.221,6.514-6.217,6.514-10.734c0-8.512-7.18-13.914-18.58-13.914 c-11.25,0-18.505,5.258-18.505,13.549c0,4.512,2.814,8.656,7.18,11.1C132.251,103.275,128.401,108.307,128.401,114.232z  M149.647,84.918c4.811,0,7.475,2.148,7.475,5.994c0,3.703-2.664,5.777-7.475,5.777c-4.813,0-7.477-2.074-7.477-5.777 C142.17,87.066,144.835,84.918,149.647,84.918z M149.647,106.164c5.697,0,8.881,2.441,8.881,6.736c0,4.441-3.184,6.811-8.881,6.811 c-5.701,0-8.809-2.445-8.809-6.811C140.839,108.605,143.946,106.164,149.647,106.164z"}),s.a.createElement("path",{d:"M199.466,129.037c14.655,0,22.872-9.404,22.872-26.354c0-16.877-8.217-26.279-22.872-26.279 c-14.805,0-23.023,9.402-23.023,26.279C176.443,119.633,184.661,129.037,199.466,129.037z M199.466,86.029 c6.514,0,9.398,4.813,9.398,16.654s-2.885,16.729-9.398,16.729c-6.662,0-9.475-4.887-9.475-16.729S192.804,86.029,199.466,86.029z"}),s.a.createElement("path",{d:"M234.948,121.119h4.865c6.857,0,10.803-3.641,10.803-9.924c0-5.973-3.945-9.346-10.803-9.346h-11.682v26.816h6.816V121.119 z M234.948,107.213h4.521c2.987,0,4.712,1.414,4.712,4.217c0,2.832-1.725,4.326-4.712,4.326h-4.521V107.213z"})),ea=s.a.createElement("g",null),ta=s.a.createElement("g",null),aa=s.a.createElement("g",null),ra=s.a.createElement("g",null),na=s.a.createElement("g",null),sa=s.a.createElement("g",null),la=s.a.createElement("g",null),ca=s.a.createElement("g",null),ia=s.a.createElement("g",null),oa=s.a.createElement("g",null),ua=s.a.createElement("g",null),ma=s.a.createElement("g",null),pa=s.a.createElement("g",null),da=s.a.createElement("g",null),va=s.a.createElement("g",null),ha=function(e){var t=e.svgRef,a=e.title,r=Zt(e,["svgRef","title"]);return s.a.createElement("svg",Xt({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 290.262 290.262",style:{enableBackground:"new 0 0 290.262 290.262"},xmlSpace:"preserve",ref:t},r),a?s.a.createElement("title",null,a):null,$t,ea,ta,aa,ra,na,sa,la,ca,ia,oa,ua,ma,pa,da,va)},ba=s.a.forwardRef((function(e,t){return s.a.createElement(ha,Xt({svgRef:t},e))}));a.p;function fa(){return(fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ea(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ga=s.a.createElement("g",{id:"_x34_3-4k_Full_HD"},s.a.createElement("path",{d:"M278.743,29.29H11.519C5.157,29.29,0,34.447,0,40.809v128.645v11.355v68.645c0,6.361,5.157,11.519,11.519,11.519h267.225 c6.361,0,11.519-5.157,11.519-11.519v-68.645v-11.355V40.809C290.262,34.447,285.104,29.29,278.743,29.29z M56.563,185.959H33.751 v15.375H54.19v4.813H33.751v18.748h-4.996v-43.748h27.809V185.959z M99.69,206.895c0,11.375-6.875,18.252-18.313,18.252 c-11.5,0-18.436-6.877-18.436-18.252v-25.748h5v25.748c0,8.5,5.122,13.439,13.436,13.439c8.313,0,13.313-4.939,13.313-13.439 v-25.748h5V206.895z M136.13,224.895h-24.188v-43.748h5v39.002h19.188V224.895z M168.444,224.895h-24.188v-43.748h4.998v39.002 h19.189V224.895z M214.693,224.895h-11.126v-16.998h-18.121v16.998h-11.127v-43.748h11.127v18h18.121v-18h11.126V224.895z  M241.822,224.895h-18.376v-25.201h11.125v16.33h7.938c6.812,0,11.688-5.254,11.688-12.939c0-7.754-5.126-13.063-12.188-13.063 h-18.563v-8.875h18.813c13.75,0,23.248,8.875,23.248,21.873C265.507,215.957,255.882,224.895,241.822,224.895z M267.225,157.935 H23.037V52.327h244.188V157.935z"}),s.a.createElement("polygon",{points:"106.752,143.336 125.882,143.336 125.882,125.48 136.895,125.48 136.895,109.83 125.882,109.83 125.882,92.439  106.752,92.439 106.752,109.83 89.594,109.83 113.708,62.18 93.883,62.18 68.261,111.686 68.261,125.48 106.752,125.48  "}),s.a.createElement("polygon",{points:"167.275,123.395 178.057,111.453 199.505,143.336 224.199,143.336 192.085,95.801 222.229,62.18 198.346,62.18  167.275,97.309 167.275,62.18 146.638,62.18 146.638,143.336 167.275,143.336  "})),ya=s.a.createElement("g",null),Oa=s.a.createElement("g",null),wa=s.a.createElement("g",null),Na=s.a.createElement("g",null),ja=s.a.createElement("g",null),ka=s.a.createElement("g",null),_a=s.a.createElement("g",null),Sa=s.a.createElement("g",null),Ra=s.a.createElement("g",null),xa=s.a.createElement("g",null),qa=s.a.createElement("g",null),Ca=s.a.createElement("g",null),Ia=s.a.createElement("g",null),Ma=s.a.createElement("g",null),Ta=s.a.createElement("g",null),Pa=function(e){var t=e.svgRef,a=e.title,r=Ea(e,["svgRef","title"]);return s.a.createElement("svg",fa({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 290.262 290.262",style:{enableBackground:"new 0 0 290.262 290.262"},xmlSpace:"preserve",ref:t},r),a?s.a.createElement("title",null,a):null,ga,ya,Oa,wa,Na,ja,ka,_a,Sa,Ra,xa,qa,Ca,Ia,Ma,Ta)},La=s.a.forwardRef((function(e,t){return s.a.createElement(Pa,fa({svgRef:t},e))})),Da=(a.p,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onServer:!1,id:r.props.match.params.id,requested:!1,related:!1,trailer:!1,reviewOpen:!1},r.getMovie=r.getMovie.bind(Object(m.a)(r)),r.request=r.request.bind(Object(m.a)(r)),r.getRequests=r.getRequests.bind(Object(m.a)(r)),r.init=r.init.bind(Object(m.a)(r)),r.showTrailer=r.showTrailer.bind(Object(m.a)(r)),r.openReview=r.openReview.bind(Object(m.a)(r)),r.closeReview=r.closeReview.bind(Object(m.a)(r)),r.getReviews=r.getReviews.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){this.getRequests(),this.props.match.params.id!==this.state.id&&(this.setState({onServer:!1,id:this.props.match.params.id,requested:!1,related:!1,trailer:!1}),this.init())}},{key:"init",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0);var e=this.props.match.params.id;this.getMovie(e),this.getRequests(),this.getReviews()}},{key:"getRequests",value:function(){var e=this.props.match.params.id,t=this.props.user.requests;if(t)if(t[e]){var a=Object.keys(t[e].users).length;this.props.user.requests[e]&&a!==this.state.requested&&this.setState({requested:a})}else this.state.requested&&this.setState({requested:!1})}},{key:"request",value:function(){var e=this,t=this.props.match.params.id,a=this.props.mediabutler.movie_lookup[t],r={id:a.id,imdb_id:a.imdb_id,tmdb_id:a.id,tvdb_id:"n/a",title:a.title,thumb:a.poster_path,type:"movie"};C.request(r,this.props.user.current).then((function(){C.getRequests().then((function(){e.getRequests()}))}))}},{key:"openReview",value:function(){this.setState({reviewOpen:!0})}},{key:"closeReview",value:function(){this.setState({reviewOpen:!1})}},{key:"componentDidMount",value:function(){this.init()}},{key:"getReviews",value:function(){var e=this.props.match.params.id;C.getReviews(e)}},{key:"getMovie",value:function(){var e=this.props.match.params.id;this.props.mediabutler.movie_lookup[e]?this.props.mediabutler.movie_lookup[e].isMinified&&G.movie(e):G.movie(e)}},{key:"showTrailer",value:function(){this.setState({trailer:!this.state.trailer})}},{key:"timeConvert",value:function(e){var t=e/60,a=Math.floor(t),r=60*(t-a),n=Math.round(r),s=a<1?"":1===a?"hr":a>1?"hrs":"";return"".concat(a>=1?a:""," ").concat(s," ").concat(n," mins")}},{key:"findNested",value:function(e,t,a){if(e[t]===a)return e;for(var r=0,n=Object.keys(e).length;r<n;r++)if("object"==typeof e[r]){var s=this.findNested(e[r],t,a);if(s)return s}}},{key:"render",value:function(){var e=this,t=this.state.id,a=null;if(this.props.mediabutler.movie_lookup[t]&&(a=this.props.mediabutler.movie_lookup[t]),!a)return s.a.createElement(_t,null);if(a.isMinified)return s.a.createElement(_t,null);var r=null,n=null;a.recommendations&&(n=a.recommendations.map((function(e){return s.a.createElement("div",{className:"related--item",key:"related-".concat(e)},s.a.createElement(Le,{movie:{id:e}}))})),r=s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Related Movies"),s.a.createElement(Ae,null,n)));var l=a.on_server?s.a.createElement("div",{className:"btn btn__square good"},s.a.createElement(mt,null),"On Plex"):this.state.requested?s.a.createElement("button",{className:"btn btn__square blue",onClick:this.request},"Requested by ".concat(this.state.requested," \n\t\t\t\t").concat(this.state.requested>1?"users":"user")):s.a.createElement("button",{className:"btn btn__square",onClick:this.request},s.a.createElement(Qe,null),"Request"),c=a.onServer?s.a.createElement("button",{className:"btn btn__square good"},s.a.createElement(lt,null),"Play"):null,i=s.a.createElement("button",{className:"btn btn__square",onClick:this.props.openIssues},s.a.createElement(tt,null),"Report an issue"),o=null;if(this.props.user.reviews&&this.props.user.reviews[this.props.match.params.id]){for(var u=!1,m=0;m<this.props.user.reviews[this.props.match.params.id].length;m++)if(this.props.user.reviews[this.props.match.params.id][m].user==this.props.user.current._id){u=this.props.user.reviews[this.props.match.params.id][m];break}o=s.a.createElement("button",{className:"btn btn__square",onClick:this.openReview},u?s.a.createElement(s.a.Fragment,null,s.a.createElement(bt,null),"Reviewed ",u.score/10*100,"%"):s.a.createElement(s.a.Fragment,null,s.a.createElement(bt,null),"Review"))}var p=a.vote_average,d=this.findNested(a.credits.crew,"job","Director"),h=this.findNested(a.credits.crew,"job","Screenplay"),b=!!a.videos.results&&a.videos.results[0];b&&"YouTube"!==b.site&&(b=!1);var f="Not Reviewed",E=0;if(this.props.user.reviews&&this.props.user.reviews[this.props.match.params.id]&&Object.keys(this.props.user.reviews[this.props.match.params.id]).length>0){var g=0;Object.keys(this.props.user.reviews[this.props.match.params.id]).map((function(t){g+=e.props.user.reviews[e.props.match.params.id][t].score/10*100})),f="".concat((g/Object.keys(this.props.user.reviews[this.props.match.params.id]).length).toFixed(0),"% (").concat(Object.keys(this.props.user.reviews[this.props.match.params.id]).length," reviews)"),E=g/Object.keys(this.props.user.reviews[this.props.match.params.id]).length}return s.a.createElement("div",{className:"movie-wrap","data-id":a.imdb_id,key:"".concat(a.title,"__wrap")},s.a.createElement(wt,{id:this.props.match.params.id,user:this.props.user.current,active:this.state.reviewOpen,closeReview:this.closeReview,getReviews:this.getReviews,item:a}),s.a.createElement("div",{className:"movie-top ".concat(this.state.trailer?"show-trailer":"")},s.a.createElement("div",{className:"movie-backdrop",key:"".concat(a.title,"__backdrop")},b&&this.state.trailer?s.a.createElement("div",{className:"series-trailer"},s.a.createElement("iframe",{frameBorder:"0",height:"100%",width:"100%",src:"https://youtube.com/embed/".concat(b.key,"?autoplay=1&controls=0&rel=0")})):null,a.backdrop_path?s.a.createElement(Te.LazyLoadImage,{src:"https://image.tmdb.org/t/p/w1280/"+a.backdrop_path,alt:a.title,effect:"blur",key:"".concat(a.title,"__backdrop")}):s.a.createElement("div",{className:"no-backdrop",style:{backgroundImage:"url(/p-seamless.png)"}})),s.a.createElement("div",{className:"movie-poster"},s.a.createElement("div",{className:"movie-poster--inner"},a.poster_path?s.a.createElement(Te.LazyLoadImage,{src:"https://image.tmdb.org/t/p/w500/"+a.poster_path,alt:a.title,effect:"blur",key:"".concat(a.title,"__poster")}):null)),s.a.createElement("div",{className:"movie-details"},s.a.createElement("span",null),s.a.createElement("div",{className:"movie-details--top"},a.logo?s.a.createElement(Te.LazyLoadImage,{className:"movie-logo",src:a.logo}):s.a.createElement("h1",{className:"single-title"},a.title)),s.a.createElement("div",{className:"movie--actions"},c,l,i))),s.a.createElement("div",{className:"movie-content"},s.a.createElement("section",null,s.a.createElement("div",{className:"quick-view"},s.a.createElement("div",{className:"side-content"},s.a.createElement("div",{className:"movie-action"},b?s.a.createElement("button",{onClick:this.showTrailer,className:"btn btn__square"},s.a.createElement(Ot,null),"Trailer"):null,o,s.a.createElement("div",{className:"resolutions"},a.available_resolutions.includes("4k")?s.a.createElement(La,null):null,a.available_resolutions.includes("1080")?s.a.createElement(ba,null):null,a.available_resolutions.includes("720")?s.a.createElement(Qt,null):null))),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"details"},s.a.createElement("p",{className:"year"},new Date(a.release_date).getFullYear()),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",{className:"runtime"},this.timeConvert(a.runtime)),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",{className:"genre"},a.genres.map((function(e,t){return t===a.genres.length-1?e.name:e.name+" / "}))),s.a.createElement("p",{className:"spacer hide-mb"},"|"),s.a.createElement("p",null,"Rating:"," ",s.a.createElement("span",{className:"color-".concat(p>7.9?"green":p>6.9?"blue":p>4.9?"orange":"red")},p)),s.a.createElement("p",{className:"spacer"},"|"),s.a.createElement("p",null,"User Rating:"," ",s.a.createElement("span",{className:"color-".concat(E>79?"green":E>69?"blue":E>49?"orange":"red")},f))),s.a.createElement("div",{className:"movie-action__mobile"},c,l,i,o),s.a.createElement("div",{className:"movie-crew"},d?s.a.createElement("div",{className:"movie-crew--item"},s.a.createElement("p",{className:"sub-title"},"Director"),s.a.createElement(v.b,{to:"/person/".concat(d.id),className:"crew-credit"},d.name)):null,h?s.a.createElement("div",{className:"movie-crew--item"},s.a.createElement("p",{className:"sub-title"},"Screenplay"),s.a.createElement(v.b,{to:"/person/".concat(h.id),className:"crew-credit"},h.name)):null),s.a.createElement("p",{className:"sub-title mb--1"},"Synopsis"),s.a.createElement("p",{className:"overview"},a.overview)))),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Cast"),s.a.createElement(Ae,null,a.credits.cast.map((function(e,t){return s.a.createElement(He,{key:"person--".concat(e.name),person:e,character:e.character})})))),r,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Reviews"),this.props.user.reviews?s.a.createElement(kt,{reviews:this.props.user.reviews[t]}):null)))}}]),a}(s.a.Component));Da=Object(h.f)(Da);var za=Object(b.b)((function(e){return{mediabutler:e.mediabutler,user:e.user}}))((function(e){return s.a.createElement(Da,{mediabutler:e.mediabutler,user:e.user,openIssues:e.openIssues})}));function Aa(){return(Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Va(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ha=s.a.createElement("circle",{cx:50,cy:50,r:32,stroke:"#ffffff",strokeWidth:0,fill:"none"}),Fa=s.a.createElement("circle",{cx:50,cy:50,r:32,stroke:"#e5a00d",strokeWidth:2,strokeLinecap:"round",fill:"none"},s.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1.5873015873015872s",values:"0 50 50;180 50 50;720 50 50",keyTimes:"0;0.5;1"}),s.a.createElement("animate",{attributeName:"stroke-dasharray",repeatCount:"indefinite",dur:"1.5873015873015872s",values:"0 201.06192982974676;176.93449825017714 24.127431579569617;0 201.06192982974676",keyTimes:"0;0.5;1"})),Ba=function(e){var t=e.svgRef,a=e.title,r=Va(e,["svgRef","title"]);return s.a.createElement("svg",Aa({style:{margin:"auto",display:"block"},width:"201px",height:"201px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t},r),a?s.a.createElement("title",null,a):null,Ha,Fa)},Ua=s.a.forwardRef((function(e,t){return s.a.createElement(Ba,Aa({svgRef:t},e))})),Ya=(a.p,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).getActor=r.getActor.bind(Object(m.a)(r)),r.handleScroll=r.handleScroll.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0);var e=this.props.match.params.id;this.getActor(e)}},{key:"getActor",value:function(e){this.props.mediabutler.person_lookup[e]||G.person(e)}},{key:"handleScroll",value:function(e){var t=e.currentTarget.querySelectorAll(".person--banner")[0],a=e.currentTarget.querySelectorAll(".person--thumb--inner")[0],r=e.currentTarget.scrollTop>t.offsetHeight?1:e.currentTarget.scrollTop/t.offsetHeight,n=50*r;r=10*r+40,t.style.backgroundPosition="50% ".concat(r,"%"),a.style.transform="translateY(".concat(n,"px)")}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.mediabutler.person_lookup[e];if(!t)return s.a.createElement("div",{className:"page-wrap"},s.a.createElement("div",{className:"spinner"},s.a.createElement(Ua,null)));var a=!1,r=0,n=this.props.mediabutler.actor_movie[e],l=!1,c=!1;n&&(l=n.cast,c=n.crew);var i=this.props.mediabutler.actor_series[e],o=!1,u=!1;return i&&(o=i.cast,u=i.crew),t.images?t.images.profiles.forEach((function(e){e.width>r&&(a=e,r=e.width)})):(a=!1,r=0),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"page-wrap",onScroll:this.handleScroll},s.a.createElement("div",{className:"person--banner",style:{backgroundImage:"url(https://image.tmdb.org/t/p/original/".concat(a.file_path,")")}}),s.a.createElement("div",{className:"person--top"},s.a.createElement("div",{className:"person--thumb"},s.a.createElement("div",{className:"person--thumb--inner"},s.a.createElement("img",{src:"https://image.tmdb.org/t/p/w1280/".concat(t.profile_path)}))),s.a.createElement("div",{className:"person--details"},s.a.createElement("h1",{className:"single-title"},t.name),s.a.createElement("p",null,t.place_of_birth),s.a.createElement("p",null,t.known_for_department))),s.a.createElement("section",null,s.a.createElement("div",{className:"person--bio"},s.a.createElement("h3",{className:"sub-title mb--1"},"Biography"),s.a.createElement("div",{className:"bio"},t.biography.split("\n").map((function(e){return s.a.createElement("p",null,e)}))))),l?s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Movies (Acting)"),s.a.createElement(Ae,null,Object.keys(l).map((function(e,t){var a=l[e];return a.popularity<10?null:s.a.createElement(Le,{key:a.id+"-cast-"+t,movie:a,character:a.character})})))):null,c?s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Movies (Production)"),s.a.createElement(Ae,null,Object.keys(c).map((function(e,t){var a=c[e];return a.popularity<10?null:s.a.createElement(Le,{key:a.id+"-cast-"+t,movie:a,character:a.job})})))):null,o?s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Shows (Acting)"),s.a.createElement(Ae,null,Object.keys(o).map((function(e,t){var a=o[e];return a.popularity<10?null:s.a.createElement(ze,{key:a.id+"-cast-"+t,series:a,character:a.character})})))):null,u?s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Shows (Production)"),s.a.createElement(Ae,null,Object.keys(u).map((function(e,t){var a=u[e];return a.popularity<10?null:s.a.createElement(ze,{key:a.id+"-cast-"+t,series:a,character:a.job})})))):null))}}]),a}(s.a.Component));Ya=Object(h.f)(Ya);var Wa=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(Ya,{mediabutler:e.mediabutler})})),Ka=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={id:!1,open:r.props.open,type:""},r}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){this.props.close()}},{key:"componentDidUpdate",value:function(){if(this.state.id!==this.props.match.params.id){var e;switch(this.props.match.path){case"/movie/:id":e="movie";break;case"/series/:id":e="series";break;default:e="unknown"}this.props.close(),this.setState({id:this.props.match.params.id,type:e})}this.props.open!==this.state.open&&this.setState({open:this.props.open})}},{key:"render",value:function(){return s.a.createElement("div",{className:"issue-sidebar ".concat(this.state.open?"open":"")},s.a.createElement("button",{className:"issue-sidebar--close",onClick:this.props.close}),s.a.createElement("p",{className:"main-title mb--2"},"Report an issue"),s.a.createElement("section",null,s.a.createElement("p",null,"We try our best to provide good quality content without any problems, but sometimes things go wrong. Please use this form to let us know of any issues you've had whilst watching Plex and we will do our best to fix them!")),s.a.createElement("section",null,s.a.createElement("p",{className:"sub-title mb--1"},"Details"),s.a.createElement("input",{type:"hidden",name:"id",defaultValue:this.state.id}),s.a.createElement("input",{type:"text",name:"type",defaultValue:this.state.type}),s.a.createElement("input",{type:"text",name:"title",value:this.state.id,readOnly:!0}),s.a.createElement("select",null,s.a.createElement("option",{value:""},"Choose an option"),s.a.createElement("option",{value:"1"},"Issue type 1"),s.a.createElement("option",{value:"2"},"Issue type 1")),s.a.createElement("textarea",{defaultValue:"Notes"})),s.a.createElement("button",{className:"btn btn__square"},"Submit"))}}]),a}(s.a.Component),Ga=Object(h.f)(Ka),Ja=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={libraries:r.props.user.library_index,credentials:!1,historyData:!1,user:!1,text:"Loading"},r.getHistory=r.getHistory.bind(Object(m.a)(r)),r.init=r.init.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.state.historyData||this.getHistory()}},{key:"getHistory",value:function(){var e=this;this.setState({historyData:[]}),G.history(this.props.user.current.admin?1:this.props.user.current._id,this.props.type).then((function(t){if(0!==Object.keys(t).length){var a=t;e.setState({historyData:a})}else e.setState({text:"No history from the last 2 weeks."})})).catch((function(t){console.log(t),e.setState({text:"No history from the last 2 weeks."})}))}},{key:"render",value:function(){var e=this;return"movie"===this.props.type?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Recently Viewed by You"),s.a.createElement("p",null,"Be sure to review movies you watched to help other users decide what to watch!"),Object.keys(this.state.historyData).length>0?s.a.createElement(Ae,null,Object.keys(this.state.historyData).map((function(t){return e.state.historyData[t].id&&"false"!==e.state.historyData[t].id?s.a.createElement(Le,{key:e.state.historyData[t].id,movie:{id:e.state.historyData[t].id}}):null}))):"Loading"===this.state.text?s.a.createElement(Fe,null):s.a.createElement("p",null,this.state.text))):s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Recently Viewed by You"),s.a.createElement("p",null,"Be sure to review shows you watched to help other users decide what to watch!"),Object.keys(this.state.historyData).length>0?s.a.createElement(Ae,null,Object.keys(this.state.historyData).map((function(t){return e.state.historyData[t].id&&"false"!==e.state.historyData[t].id?s.a.createElement(ze,{key:e.state.historyData[t].id,series:{id:e.state.historyData[t].id}}):null}))):"Loading"===this.state.text?s.a.createElement(Fe,null):s.a.createElement("p",null,this.state.text)))}}]),a}(s.a.Component);Ja=Object(h.f)(Ja);var Qa=Object(b.b)((function(e){return{user:e.user}}))((function(e){return s.a.createElement(Ja,{user:e.user,type:e.type})})),Xa=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open4kmodal:!1},r.open4k=r.open4k.bind(Object(m.a)(r)),r.close4k=r.close4k.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0)}},{key:"open4k",value:function(){this.setState({open4kmodal:!0})}},{key:"close4k",value:function(){this.setState({open4kmodal:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"profile-page"},s.a.createElement("div",{className:"modal-4k-request ".concat(this.state.open4kmodal?"open":"")},s.a.createElement("div",{className:"modal-4k-request--top"},s.a.createElement("h3",null,"Request 4K / UHD Access")),s.a.createElement("div",{className:"modal-4k-request--content"},s.a.createElement("p",null,"Access to 4K / UHD content is limited to users who have both the internet speed and devices to watch 4K without buffering or the server trying to convert down to a lower resolution."),s.a.createElement("p",null,"Before processing your request make sure your device can play HEVC (aka h.265) and your internet speed is above 50mbps. Check your TV / device manual for information on video codecs and perform a speed test below."),s.a.createElement("div",{className:"modal-4k-request--speed"},s.a.createElement("iframe",{src:"https://www.metercustom.net/plugin/"})),s.a.createElement("p",null,"Passed both criteria? Click below to request access."),s.a.createElement("div",{className:"btn btn__square bad modal-4k-request--cancel",onClick:this.close4k},"Cancel"),s.a.createElement("button",{className:"modal-4k-request--submit btn btn__square"},"Request Access"))),s.a.createElement("h1",{className:"main-title mb--2"},"Your Account"),s.a.createElement("section",null,s.a.createElement("div",{className:"profile-overview"},s.a.createElement("div",{className:"profile-thumb"},s.a.createElement("a",{href:"https://app.plex.tv/desktop#!/settings/account",target:"_blank",className:"thumb",style:{backgroundImage:"url("+this.props.user.current.thumb+")",color:"red"}}),s.a.createElement("div",{className:"hover"},s.a.createElement("p",null,"Change"))),s.a.createElement("div",{className:"profile-info"},s.a.createElement("h3",{className:"sub-title"},this.props.user.current.username),s.a.createElement("p",{className:"email"},this.props.user.current.email),s.a.createElement("p",{className:"role"},this.props.user.current.admin?"Admin":"Friend")),s.a.createElement("div",{className:"profile-access"},s.a.createElement("h3",{className:"sub-title"},"Content Access"),s.a.createElement("div",{className:"a-wrap"},s.a.createElement("div",{className:"a-720 a-icon"},s.a.createElement(Qt,null)),s.a.createElement("div",{className:"a-1080 a-icon"},s.a.createElement(ba,null)),s.a.createElement("div",{className:"a-4k a-icon ".concat(this.props.user.current.uhd?"active":"disabled")},s.a.createElement(La,null))),this.props.user.current.uhd?null:s.a.createElement("div",{className:"btn btn__square request-access-4k mt--1",onClick:this.open4k},"Request Access to UHD / 4K?")),s.a.createElement("div",{className:"profile-logout"},s.a.createElement("p",{className:"logout sub-title",onClick:this.props.logout},"Logout")))),s.a.createElement(Qa,{type:"movie"}),s.a.createElement(Qa,{type:"show"}))}}]),a}(s.a.Component);Xa=Object(h.f)(Xa);var Za=Object(b.b)((function(e){return{user:e.user}}))((function(e){return s.a.createElement(Xa,{user:e.user,logout:e.logout})})),$a=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={libraries:r.props.user.library_index,credentials:!1,topData:!1},r.getTop=r.getTop.bind(Object(m.a)(r)),r.init=r.init.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.state.topData||this.getTop("movies")}},{key:"getTop",value:function(){var e=this;G.top(this.props.type).then((function(t){e.setState({topData:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return"movie"===this.props.type?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Popular on Plex"),this.state.topData?s.a.createElement(Ae,null,Object.keys(this.state.topData).map((function(t){return e.state.topData[t].item.tmdb_id&&"false"!==e.state.topData[t].item.tmdb_id?s.a.createElement("div",{key:t,className:"popular-card"},s.a.createElement("p",{className:"popular-card--count"},e.state.topData[t].globalViewCount),s.a.createElement(Le,{key:e.state.topData[t].item.tmdb_id,movie:{id:e.state.topData[t].item.tmdb_id}})):null}))):s.a.createElement(Fe,null))):s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Popular on Plex"),this.state.topData?s.a.createElement(Ae,null,Object.keys(this.state.topData).map((function(t){return e.state.topData[t].item.tmdb_id&&"false"!==e.state.topData[t].item.tmdb_id?s.a.createElement("div",{key:e.state.topData[t].item.tmdb_id,className:"popular-card"},s.a.createElement("p",{className:"popular-card--count"},e.state.topData[t].globalViewCount),s.a.createElement(ze,{key:e.state.topData[t].id,series:{id:e.state.topData[t].item.tmdb_id}})):null}))):s.a.createElement(Fe,null)))}}]),a}(s.a.Component);$a=Object(h.f)($a);var er=Object(b.b)((function(e){return{user:e.user}}))((function(e){return s.a.createElement($a,{user:e.user,type:e.type})})),tr=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0),!Object.keys(this.props.mediabutler.popular).length>0&&G.getPopular()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"main-title mb--1"},"Movies"),s.a.createElement(er,{type:"movie"}),s.a.createElement(Qa,{type:"movie"}),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Trending Movies"),s.a.createElement(Ae,null,Object.keys(this.props.mediabutler.popular).length>0?this.props.mediabutler.popular.movies.map((function(e){return s.a.createElement(Le,{key:e.id,movie:e})})):null)))}}]),a}(s.a.Component);tr=Object(h.f)(tr);var ar=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(tr,{mediabutler:e.mediabutler})})),rr=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.request;if(!t)return null;var a=t.poster_path?s.a.createElement("img",{src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path),alt:t.title}):s.a.createElement("div",{className:"no-poster"}),r=this.props.user.requests[t.id].type;return s.a.createElement("div",{key:t.id,"data-key":t.id,className:"card type--movie-tv"},s.a.createElement("div",{className:"card--inner"},s.a.createElement(v.b,{to:"/".concat("tv"===r?"series":"movie","/").concat(t.id),className:"full-link"}),s.a.createElement("div",{className:"request-count"},Object.keys(this.props.user.requests[t.id].users).length),s.a.createElement("div",{className:"image-wrap"},a),s.a.createElement("div",{className:"text-wrap"},s.a.createElement("p",{className:"title",title:t.title||t.name},t.title||t.name,s.a.createElement("span",{className:"year"},"movie"===r?"(".concat(new Date(t.release_date).getFullYear(),")"):"(".concat(new Date(t.first_air_date).getFullYear()," - ").concat(new Date(t.last_air_date).getFullYear(),")"))),this.props.user.current.admin?s.a.createElement("p",{className:"request-info"},Object.keys(this.props.user.requests[t.id].users).map((function(a){return s.a.createElement("span",null,e.props.user.requests[t.id].users[a])}))):null)))}}]),a}(s.a.Component);rr=Object(h.f)(rr);var nr=Object(b.b)((function(e){return{tmdb:e.tmdb,user:e.user}}))((function(e){return s.a.createElement(rr,{tmdb:e.tmdb,user:e.user,request:e.request})})),sr=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={requests:!1,loaded:!1},r.getRequests=r.getRequests.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0),this.getRequests()}},{key:"componentDidUpdate",value:function(){this.state.requests||this.getRequests()}},{key:"getRequests",value:function(){var e=this.props.user.requests;e&&(this.setState({requests:!0,loaded:!0}),Object.keys(e).map((function(t){"movie"===e[t].type?G.movie(t):G.series(t)})))}},{key:"render",value:function(){var e=this;if(!this.state.loaded)return s.a.createElement("div",{className:"requests-page"},s.a.createElement("h1",{className:"main-title"},"Requests"),s.a.createElement("div",{className:"request-section"},s.a.createElement("p",{className:"sub-title"},"Loading...")));var t=this.props.user.requests,a=Object.keys(t).map((function(a){var r=e.props.mediabutler.movie_lookup[a];return"tv"===t[a].type&&(r=e.props.mediabutler.series_lookup[a]),r?s.a.createElement(nr,{key:a,request:r}):null}));t=this.props.user.requests,console.log(t);var r=Object.keys(t).map((function(a){var r=e.props.mediabutler.movie_lookup[a];"tv"===t[a].type&&(r=e.props.mediabutler.series_lookup[a]);var n=e.props.user.current._id;return r&&t[a].users.includes(n)?s.a.createElement(nr,{key:a+"_your",request:r}):null}));return s.a.createElement("div",{className:"requests-page"},s.a.createElement("h1",{className:"main-title mb--1"},"Requests"),s.a.createElement("div",{className:"request-section"},s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Pending Requests"),s.a.createElement(Ae,null,a))),s.a.createElement("div",{className:"request-section"},s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Your Requests"),s.a.createElement(Ae,null,r))))}}]),a}(s.a.Component);sr=Object(h.f)(sr);var lr=Object(b.b)((function(e){return{mediabutler:e.mediabutler,user:e.user}}))((function(e){return s.a.createElement(sr,{mediabutler:e.mediabutler,user:e.user})})),cr=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.querySelectorAll(".page-wrap")[0].scrollTop=0,window.scrollTo(0,0),!Object.keys(this.props.mediabutler.popular).length>0&&G.getPopular()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"main-title mb--1"},"TV Shows"),s.a.createElement(er,{type:"show"}),s.a.createElement(Qa,{type:"show"}),s.a.createElement("section",null,s.a.createElement("h3",{className:"sub-title mb--1"},"Trending Shows"),s.a.createElement(Ae,null,Object.keys(this.props.mediabutler.popular).length>0?this.props.mediabutler.popular.tv.map((function(e){return s.a.createElement(ze,{key:e.id,series:e})})):null)))}}]),a}(s.a.Component);cr=Object(h.f)(cr);var ir=Object(b.b)((function(e){return{mediabutler:e.mediabutler}}))((function(e){return s.a.createElement(cr,{mediabutler:e.mediabutler})})),or=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={mb_login:!1,activeServerCheck:!1,issuesOpen:!1,adminLogin:!1,isLoggedIn:r.props.user.logged_in,isAdmin:!1,loading:!1},r.openIssues=r.openIssues.bind(Object(m.a)(r)),r.closeIssues=r.closeIssues.bind(Object(m.a)(r)),r.adminToggle=r.adminToggle.bind(Object(m.a)(r)),r.loginForm=r.loginForm.bind(Object(m.a)(r)),r.inputChange=r.inputChange.bind(Object(m.a)(r)),r.logout=r.logout.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"inputChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(i.a)({},a,r))}},{key:"loginForm",value:function(e){e.preventDefault();var t=this.state.username,a=this.state.password;this.state.adminLogin;this.login(t,a)}},{key:"login",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.props.user.credentials&&(this.state.adminLogin&&(n=!0),this.setState({loading:!0}),C.login(e,t,r,n).then((function(e){a.setState({loading:!1}),e.error?alert(e.error):(e.loggedIn&&a.setState({isLoggedIn:!0}),e.admin&&a.setState({isAdmin:!0}),C.getRequests())})).catch((function(e){console.log(e),alert("There has been an error, Petio may be temporarily unavailable"),localStorage.removeItem("loggedin")})))}},{key:"adminToggle",value:function(){this.setState({adminLogin:!this.state.adminLogin})}},{key:"logout",value:function(){localStorage.removeItem("loggedin"),localStorage.removeItem("adminloggedin"),C.logout(),this.setState({isLoggedIn:!1,isAdmin:!1})}},{key:"componentDidUpdate",value:function(){}},{key:"loginLocal",value:function(){var e=this;localStorage.getItem("loggedin")&&(this.props.user.credentials?"true"===localStorage.getItem("adminloggedin")?this.login("",!1,!0,!0):this.login("",!1,!0,!1):setTimeout((function(){e.loginLocal()}),500))}},{key:"openIssues",value:function(){this.setState({openIssues:!0})}},{key:"closeIssues",value:function(){this.setState({openIssues:!1})}},{key:"componentDidMount",value:function(){this.loginLocal(),this.state.openIssues&&this.setState({openIssues:!1})}},{key:"render",value:function(){this.props.mediabutler.current_user;return this.state.isLoggedIn?s.a.createElement("div",{className:"page"},s.a.createElement(v.a,null,s.a.createElement("div",{className:"sidebar"},s.a.createElement(_e,null)),s.a.createElement(h.c,null,s.a.createElement(h.a,{exact:!0,path:"/"},s.a.createElement("div",{className:"page-wrap"},s.a.createElement(Ye,null))),s.a.createElement(h.a,{exact:!0,path:"/user"},s.a.createElement("div",{className:"page-wrap"},s.a.createElement(Za,{logout:this.logout}))),s.a.createElement(h.a,{exact:!0,path:"/movie/:id"},s.a.createElement(Ga,{open:this.state.openIssues,close:this.closeIssues}),s.a.createElement("div",{className:"page-wrap"},s.a.createElement(za,{openIssues:this.openIssues}))),s.a.createElement(h.a,{exact:!0,path:"/series/:id"},s.a.createElement(Ga,{open:this.state.openIssues,close:this.closeIssues}),s.a.createElement("div",{className:"page-wrap"},s.a.createElement(Rt,{openIssues:this.openIssues}))),s.a.createElement(h.a,{exact:!0,path:"/series/:id/season/:season"},s.a.createElement(Ga,{open:this.state.openIssues,close:this.closeIssues}),s.a.createElement(qt,{openIssues:this.openIssues})),s.a.createElement(h.a,{path:"/person/:id"},s.a.createElement(Wa,null)),s.a.createElement(h.a,{exact:!0,path:"/requests"},s.a.createElement("div",{className:"page-wrap"},s.a.createElement(lr,null))),s.a.createElement(h.a,{exact:!0,path:"/movies"},s.a.createElement("div",{className:"page-wrap"},s.a.createElement(ar,null))),s.a.createElement(h.a,{exact:!0,path:"/tv"},s.a.createElement("div",{className:"page-wrap"},s.a.createElement(ir,null))))),this.props.mediabutler.config?null:s.a.createElement(Me,null)):s.a.createElement("div",{className:"login-wrap"},this.state.loading&&this.props.user.credentials?s.a.createElement("div",{className:"spinner"},s.a.createElement(Ua,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"login--inner"},s.a.createElement("h1",{className:"logo"},"Pet",s.a.createElement("span",null,"io")),s.a.createElement("p",{className:"main-title"},this.state.adminLogin?"Admin Login":"Login"),s.a.createElement("p",null,"Log in with your Plex username"),s.a.createElement("form",{onSubmit:this.loginForm,autoComplete:"on"},s.a.createElement("p",null,"Username -"," ",s.a.createElement("span",{className:"admin-toggle",onClick:this.adminToggle},this.state.adminLogin?"Not Admin?":"Admin?")),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.inputChange,autoComplete:"username"}),this.state.adminLogin?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Password"),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.inputChange,autoComplete:"current-password"})):null,s.a.createElement("button",{className:"btn"},"Login"))),s.a.createElement("p",{className:"powered-by"},"Petio build (alpha) 0.1.7")))}}]),a}(s.a.Component);var ur=Object(b.b)((function(e){return{plex:e.plex,mediabutler:e.mediabutler,user:e.user}}))((function(e){return s.a.createElement(or,{plex:e.plex,mediabutler:e.mediabutler,user:e.user})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(46);var mr=function(){var e;r=Object(y.createStore)(w,Object(j.composeWithDevTools)(),e,Object(y.applyMiddleware)(N.a)),k(),c.a.render(s.a.createElement(b.a,{store:r},s.a.createElement(ur,null)),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",mr,!1):mr(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.1c06b433.chunk.js.map